[object_types]
	[object_type]
	id=cannon
	on_end_anim="if(animation = 'normal',
	                   if(vars.load >= vars.loading_time,
					     [animation('fire'), set_var('load', 0)],
						 [animation('normal'), set_var('load', vars.load + 1)]),
					      animation('normal'))"
	on_shoot="spawn('missile', x + if(facing > 0, 50, -50), y + 10, facing)"
	body_harmful=no
		[animation]
		id=normal
		image=cannon.png
		rect=7,18,36,49
		collide=0,0,15,28
		frames=1
		duration=10
		scale=2
		[/animation]
		[animation]
		id=fire
		image=cannon.png
		sound=cannon.ogg
		rect=39,18,69,49
		collide=0,0,15,28
		frames=1
		duration=10
		scale=2
		events="5:shoot"
		[/animation]
	[/object_type]

	[object_type]
	id=aiming_cannon
	body_harmful=no

	on_shoot_horz="spawn('missile', x + if(facing > 0, 50, -25), y + 15, facing)"
	on_shoot_diag="spawn('missile_diag', x + if(facing > 0, 30, -20), y - 12, facing)"
	on_shoot_vert="spawn('missile_vert', x + 1, y - 18, facing)"

	on_end_anim="switch(animation,
		'fire_horz', animation('aim_horz'),
		'fire_diag', animation('aim_diag'),
	    'fire_vert', animation('aim_vert'),
	
	    [if(preferred_aim = current_aim, [animation(animation)],
	         switch(if(preferred_aim < current_aim, current_aim - 1,
			                                        current_aim + 1),
					0, [facing(-1), animation('aim_horz')],
					1, [facing(-1), animation('aim_diag')],
					2, [facing(-1), animation('aim_vert')],
					3, [facing(1), animation('aim_diag')],
					4, [facing(1), animation('aim_horz')])),
	              if(vars.load >= vars.loading_time, [set_var('load', 0),
				      animation(switch(animation,
					                   'aim_horz', 'fire_horz',
					                   'aim_diag', 'fire_diag',
					                   'aim_vert', 'fire_vert'))
				                    ],
				                    set_var('load', vars.load + 1))]
								)
	   where preferred_aim =
	     if(level.player.y2 > y, if(level.player.x < x, 0, 4),
		    if(level.player.x2 > x and level.player.x < x2, 2,
			     if(level.player.x < x, 1, 3))),
		     current_aim = switch(animation,
			   'aim_vert', 2,
			   'aim_diag', if(facing < 0, 1, 3),
			   'aim_horz', if(facing < 0, 0, 4))"

		[animation]
		id=aim_horz
		image=aiming-cannon.png
		rect=0,66,24,97
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		[/animation]
		[animation]
		id=aim_diag
		image=aiming-cannon.png
		rect=28,66,52,97
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		[/animation]
		[animation]
		id=aim_vert
		image=aiming-cannon.png
		rect=55,66,79,97
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		[/animation]

		[animation]
		id=fire_horz
		image=aiming-cannon.png
		rect=0,0,26,31
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		events="5:shoot_horz"
		sound=cannon.ogg
		[/animation]
		[animation]
		id=fire_diag
		image=aiming-cannon.png
		rect=28,0,51,31
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		events="5:shoot_diag"
		sound=cannon.ogg
		[/animation]
		[animation]
		id=fire_vert
		image=aiming-cannon.png
		rect=55,0,76,31
		collide=1,5,20,29
		feet_x=14
		feet_y=29
		duration=10
		events="5:shoot_vert"
		sound=cannon.ogg
		[/animation]

	[/object_type]

	[object_type]
	id=missile
	next_animation="'normal'"
	on_collide="animation('explode')"
	on_collide_head="animation('explode')"
	on_collide_feet="animation('explode')"
	on_hit_player="animation('explode')"
	on_end_explode="die()"
		[animation]
		id=normal
		image=cannon.png
		x=20
		y=3
		w=17
		h=7
		collide_x=3
		collide_y=0
		collide_w=11
		collide_h=7
		frames=1
		duration=100000
		scale=2
		velocity_x=800
		[/animation]

		[animation]
		id=explode
		image=cannon.png
		x=40
		y=0
		w=15
		h=10
		frames=1
		duration=10
		scale=2
		velocity_x=1
		velocity_y=1
		events="9:end_explode"
		[/animation]

	[/object_type]

	[object_type]
	id=missile_diag
	next_animation="'normal'"
	on_collide="animation('explode')"
	on_collide_head="animation('explode')"
	on_collide_feet="animation('explode')"
	on_hit_player="animation('explode')"
	on_end_explode="die()"
		[animation]
		id=normal
		image=cannon.png
		rotate=-45
		x=20
		y=3
		w=17
		h=7
		collide_x=3
		collide_y=0
		collide_w=11
		collide_h=7
		frames=1
		duration=100000
		scale=2
		velocity_x=500
		velocity_y=-500
		[/animation]
		[animation]
		id=explode
		image=cannon.png
		x=40
		y=0
		w=15
		h=10
		frames=1
		duration=10
		scale=2
		velocity_x=1
		velocity_y=1
		events="9:end_explode"
		[/animation]
	[/object_type]

	[object_type]
	id=missile_vert
	next_animation="'normal'"
	on_collide="animation('explode')"
	on_collide_head="animation('explode')"
	on_collide_feet="animation('explode')"
	on_hit_player="animation('explode')"
	on_end_explode="die()"
		[animation]
		id=normal
		image=cannon.png
		rotate=-90
		x=20
		y=3
		w=17
		h=7
		collide_x=3
		collide_y=0
		collide_w=11
		collide_h=7
		frames=1
		duration=100000
		scale=2
		velocity_y=-800
		[/animation]
		[animation]
		id=explode
		image=cannon.png
		x=40
		y=0
		w=15
		h=10
		frames=1
		duration=10
		scale=2
		velocity_x=1
		velocity_y=1
		events="9:die"
		[/animation]
	[/object_type]

	[object_type]
	id=mosquito
	walk=80
	glide=-40
	jump=800
	boost=25
	hitpoints=1
	springiness=100
	friction=5

	on_hit_by_player="die()"
	on_die="spawn('die_cloud', x, y, facing)"
	on_process="if(solid(level, front + facing*50, y, 1, y2 - y),
	            [facing(-facing), animation('turn')], null())"
	on_end_anim="[if(facing < 0 and x < vars.x_bound or
	                facing > 0 and x2 > vars.x2_bound,
					[facing(-facing), animation('turn')],
					animation('fly'))]"
	on_collide="[facing(-facing), animation('turn')]"
	on_jumped_on="animation('spring')"

		[animation]
		id=fly
		image=mosquito.png
		duplicates=12
		rect=2,2,32,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=20
		[/animation]

		[animation]
		id=fly
		image=mosquito.png
		rect=70,2,100,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=20
		reverse=yes
		[/animation]

		[animation]
		id=spring
		image=mosquito.png
		rect=2,36,32,66
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=5
		pad=3
		duration=3
		[/animation]

		[animation]
		id=turn
		image=mosquito.png
		rect=2,70,32,100
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=1
		pad=3
		duration=10
		[/animation]

	[/object_type]

	[object_type]
	id=red_mosquito
	hitpoints=1
	springiness=100
	friction=5
	ignore_collide="yes"

	on_hit_by_player="die()"
	on_create="[set_var('dive', 0), set_var('soar', 0), set_var('return_y', y)]"
	on_die="spawn('die_cloud', x, y, facing)"
	on_process="[set('rotate', if(abs(velocity_x) < 100, 0, (45*velocity_y)/velocity_x)),
	            if(vars.soar,
				   [debug('soar!'), if(y <= vars.return_y, set_var('soar', 0),
				         if(-velocity_y < abs(velocity_x),
						    set('velocity_y', velocity_y - 30), null()))],
	            if(vars.dive, [if(abs(velocity_y) < abs(velocity_x),
	                             set('velocity_y', velocity_y + 30),
								 null()),
								 debug(y),
								 debug('player'),
								 debug(level.player.y),
							   if(y > level.player.y-20 or vars.dive > 90,
							     [set_var('dive', 0), set_var('soar', 1)],
								  set_var('dive', vars.dive + 1))],
	            if(solid(level, front + facing*80, y, 1, y2 - y),
	            [facing(-facing), animation('turn')],
				  if(animation = 'fly' and
				     level.player.y > y + 50 and level.player.y < y + 300 and
					 level.player.x > min(x + facing*100, x + facing*300) and
					 level.player.x < max(x + facing*100, x + facing*300),
					 [set_var('dive', 1),
					  set_var('target_x',(level.player.x + level.player.x2)/2),
					  set_var('target_y',level.player.y)],

					  #make us return to our original height#
					 if(vars.return_y and y != vars.return_y,
					    set('velocity_y', velocity_y + if(y < vars.return_y, 15, -15)), null()))))) ]"
	on_end_anim="if(vars.dive = 0 and vars.soar = 0 and
	                (facing < 0 and x < vars.x_bound or
	                facing > 0 and x2 > vars.x2_bound),
					[facing(-facing), animation('turn')],
					animation('fly'))"
	on_collide="[facing(-facing), animation('turn')]"
	on_jumped_on="animation('spring')"

		[animation]
		id=fly
		image=mosquito-red.png
		rect=2,2,32,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=30
		[/animation]

		[animation]
		id=spring
		image=mosquito-red.png
		rect=2,36,32,66
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=5
		pad=3
		duration=3
		[/animation]

		[animation]
		id=turn
		image=mosquito-red.png
		rect=2,70,32,100
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=1
		pad=3
		duration=10
		[/animation]

	[/object_type]

	[object_type]
	id=platform_mosquito
	walk=80
	glide=-40
	jump=800
	boost=25
	hitpoints=1
	springiness=100
	friction=5

	on_hit_by_player="die()"
	on_die="spawn('die_cloud', x, y, facing)"
	on_process="if(solid(level, front + facing*50, y, 1, y2 - y),
	            [facing(-facing), animation('turn')], null())"
	on_end_anim="[if(facing < 0 and x < vars.x_bound or
	                facing > 0 and x2 > vars.x2_bound,
					[facing(-facing), animation('turn')],
					animation('fly'))]"
	on_collide="[facing(-facing), animation('turn')]"
	on_jumped_on="null()"

		[animation]
		id=fly
		image=platform-mosquito.png
		rect=2,2,32,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		platform_x=2
		platform_y=10
		platform_w=28
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=20
		[/animation]

		[animation]
		id=turn
		image=platform-mosquito.png
		rect=2,36,32,66
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		platform_x=10
		platform_y=10
		platform_w=18
		feet_x=10
		feet_y=18
		frames=1
		pad=3
		duration=10
		[/animation]

	[/object_type]

	[object_type]
	id=die_cloud
	walk=80
	glide=-40
	jump=800
	boost=25
	hitpoints=1
	springiness=100
	on_end_anim="die()"
		[animation]
		id=die
		image=die-cloud.png
		sound=splat.ogg
		rect=3,7,22,25
		feet_x=13
		feet_y=22
		frames=4
		pad=3
		duration=6
		[/animation]
	[/object_type]
	
	[object_type]
	id=sparkle
	on_end_anim="die()"
	on_create="set('time_in_animation', 1d16-1)"
		[animation]
		id=sparkle
		image=items.png
		rect=29,6,38,14
		frames=4
		duration=6
		[/animation]
	[/object_type]

	[object_type]
	id=heart_sparkle
	on_end_anim="die()"
	on_create="[set('time_in_animation', 1d12 - 1), set('velocity_x', 1d1000 - 500), set('velocity_y', 1d1000 - 500)]"
	on_process="set('alpha', 255 - time_in_animation*8)"
		[animation]
		id=sparkle
		image=items.png
		x=27
		y=82
		w=12
		h=10
		frames=2
		scale=2
		duration=12
		[/animation]
	[/object_type]

	[object_type]
	id=breakable_block
	on_hit_by_player="if(animation != 'cracked', animation('cracked'),
	  [map([0,0,0,0,0,0,0,0,0,0], spawn('breakable_block_particle', x + 1d10, y + 1d10, facing)), die()])"
	body_harmful=no
		[animation]
		id=normal
		image=blocks.png
		rect=9,8,24,27
		collide=0,0,15,19
		frames=1
		duration=100
		[/animation]
		[animation]
		id=cracked
		image=blocks.png
		rect=26,8,41,27
		collide=0,0,15,19
		frames=1
		duration=100
		[/animation]
	[/object_type]

	[object_type]
	id=breakable_crate
	on_hit_by_player="if(animation != 'cracked', animation('cracked'),
	  [map([0,0,0,0,0,0,0,0,0,0], spawn('breakable_crate_particle', x + 1d10, y + 1d10, facing)), die()])"
	body_harmful=no
		[animation]
		id=normal
		image=crate.png
		rect=3,2,19,19
		collide=0,0,15,15
		frames=1
		duration=100
		[/animation]
		[animation]
		id=cracked
		image=crate.png
		rect=20,2,36,19
		collide=0,0,15,15
		frames=1
		duration=100
		[/animation]
	[/object_type]

	[object_type]
	id=breakable_block_particle
	on_create="[animation('normal' + 1d11), set('velocity_x', 1d1000*level.player.facing), set('velocity_y', 1d2000 - 1000), set('rotate', 0), set_var('rotation', 1d20)]"
	on_end_anim="die()"
	body_harmful=no
	body_passthrough=yes

		[animation]
		accel_y=70
		id=normal1
		image=blocks.png
		rect=12,29,20,35
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal2
		image=crate.png
		rect=26,29,34,36
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal3
		image=crate.png
		rect=10,38,13,44
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal4
		image=crate.png
		rect=16,38,20,44
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal5
		image=crate.png
		rect=27,38,32,43
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal6
		image=crate.png
		rect=36,38,41,44
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal7
		image=crate.png
		rect=7,52,10,56
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal8
		image=crate.png
		rect=11,47,17,55
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal9
		image=crate.png
		rect=22,47,27,55
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal10
		image=crate.png
		rect=30,47,34,52
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal11
		image=crate.png
		rect=37,47,41,55
		frames=1
		duration=100
		[/animation]

	[/object_type]

	[object_type]
	id=breakable_crate_particle
	body_harmful=no
	on_create="[animation('normal' + 1d6), set('velocity_x', 1d1000*level.player.facing), set('velocity_y', 1d2000 - 1000), set('rotate', 0), set_var('rotation', 1d20)]"
	on_collide="set('velocity_x', -(velocity_x*70)/100)"
	on_collide_head="set('velocity_y', -velocity_y)"
	on_collide_feet="[set('velocity_x', (velocity_x*70)/100), set('velocity_y', -velocity_y/2)]"
	on_end_anim="die()"
	body_passthrough=yes

		[animation]
		accel_y=70
		id=normal1
		image=crate.png
		rect=3,20,7,24
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal2
		image=crate.png
		rect=8,20,13,25
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal3
		image=crate.png
		rect=14,20,19,26
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal4
		image=crate.png
		rect=20,20,25,27
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal5
		image=crate.png
		rect=26,20,33,26
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

		[animation]
		accel_y=70
		id=normal6
		image=crate.png
		rect=14,20,19,25
		collide=4,4,9,9
		frames=1
		duration=100
		[/animation]

	[/object_type]

	[object_type]
	id=chain_link
	on_create="[set_var('base_x', x), set_var('base_y', y)]"
	on_process="[
	set('x', vars.base_x + (wave((wave(cycle*vars.speed)+1000)/4 + 250)*vars.radius)/1000),
	set('y', vars.base_y + (wave((wave(cycle*vars.speed)+1000)/4)*vars.radius)/1000),
	set('rotate', (((wave(cycle*vars.speed)+1000)/2)*180)/1000)]"
		[animation]
		id=normal
		image=dirt-tiles.png
		rect=0,96,15,111
		duration=100000000
		[/animation]
	[/object_type]

	[object_type]
	id=woodplatform
	hitponts=1
	surface_friction=18
		[animation]
		id=normal
		image=dirt-tiles.png
		x=0
		y=64
		w=48
		h=16
		platform_x=0
		platform_y=0
		platform_w=48
		[/animation]
	[/object_type]

	[object_type]
	id=circular_saw
	hitpoints=1
	body_harmful=yes
	on_process="set('rotate', rotate + 12)"
		[animation]
		id=normal
		image=circular-saw.png
		rect=0,0,16,16
		collide=0,0,16,16
		[/animation]
	[/object_type]

	[object_type]
	id=friendly_cat
	on_touch="dialog('Hello, how are you today?')"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=characters.png
		rect="71,133,100,166"
		collide="0,0,28,33"
		frames=1
		duration=80000
		[/animation]
	[/object_type]

	[object_type]
	id=buyable_heart
	on_touch="if(level.player.hitpoints = level.player.max_hitpoints,
	             dialog('This heart will restore a health point, but you are already at maximum health.'),
				 if(level.player.coins < 3,
				    dialog('This heart will restore a health point, but it costs three coins. You do not have enough.'),
					dialog('This heart will restore a health point, and costs three coins. Do you want to buy it?',
					        'Yes', [die(), set(level.player, 'hitpoints', level.player.hitpoints + 1), set(level.player, 'coins', level.player.coins - 3)],
							'No')))"
	next_animation="'normal'"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=items.png
		x=27
		y=72
		w=12
		h=10
		collide="0,0,12,10"
		frames=4
		duration=4
		reverse=yes
		[/animation]
	[/object_type]

	[object_type]
	id=buyable_max_heart
	on_touch="if(level.player.coins < 30,
				    dialog('This heart will give you an extra health point, but it costs thirty coins. You do not have enough.'),
					dialog('This heart will give you an extra health point, and costs thirty coins. Do you want to buy it?',
					        'Yes', [die(), set(level.player, 'max_hitpoints', level.player.max_hitpoints + 1), set(level.player, 'hitpoints', level.player.hitpoints + 1), set(level.player, 'coins', level.player.coins - 30)],
							'No'))"
	next_animation="'normal'"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=items.png
		x=8
		y=42
		w=19
		h=27
		collide="0,0,19,27"
		frames=4
		duration=4
		reverse=yes
		[/animation]
	[/object_type]

	[object_type]
	id=buyable_speed_boots
	on_touch="if(level.player.coins < 30,
				    dialog('The speed boots will make you faster, but they cost thirty coins. You do not have enough.'),
					dialog('This speed boots will make you faster, and cost thirty coins. Do you want to buy them?',
					        'Yes', [die(), set(level.player, 'walk_speed', level.player.walk_speed + 30), set(level.player, 'coins', level.player.coins - 30)],
							'No'))"
	next_animation="'normal'"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=items.png
		image_formula="rgba(b,g,r,a)"
		x=8
		y=42
		w=19
		h=27
		collide="0,0,19,27"
		frames=4
		duration=4
		reverse=yes
		[/animation]
	[/object_type]

	[object_type]
	id=buyable_jumping_boots
	on_touch="if(level.player.coins < 80,
				    dialog('The power boots will make you jump higher, but they cost eighty coins. You do not have enough.'),
					dialog('The power boots will make you jump higher, and cost eighty coins. Do you want to buy them?',
					        'Yes', [die(), set(level.player, 'jump_power', level.player.jump_power + 150), set(level.player, 'coins', level.player.coins - 80)],
							'No'))"
	next_animation="'normal'"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=items.png
		image_formula="rgba(g,b,r,a)"
		x=8
		y=42
		w=19
		h=27
		collide="0,0,19,27"
		frames=4
		duration=4
		reverse=yes
		[/animation]
	[/object_type]

	[object_type]
	id=buyable_gliding_wings
	on_touch="if(level.player.coins < 100,
				    dialog('The gliding wings will allow you to glide through the air, but they cost a hundred coins. You do not have enough.'),
					dialog('The gliding wings will allow you to glide through the air, and cost a hundred coins. Do you want to buy them?',
					        'Yes', [die(), set(level.player, 'glide_speed', level.player.glide_speed + 20), set(level.player, 'coins', level.player.coins - 100)],
							'No'))"
	next_animation="'normal'"
	body_harmful=no
	body_passthrough=yes
		[animation]
		id=normal
		image=items.png
		image_formula="rgba(r,r,r,a)"
		x=8
		y=42
		w=19
		h=27
		collide="0,0,19,27"
		frames=4
		duration=4
		reverse=yes
		[/animation]
	[/object_type]
	
	[object_type]
	id=fumper
	hit_points=1
	on_die="spawn('die_cloud', x, y, facing)"
	on_collide_head="set('velocity_y', 0)"
	on_collide_feet="[animation('normal'), set('velocity_x', 0)]"

	on_end_turn_anim="[set('facing', if(level.player.x < x, -1, 1)), animation('normal')]"
	on_end_normal_anim="if(desired_facing != facing, animation('turn'), animation('start_jump'))
                         where desired_facing = if(level.player.x < x, -1, 1)"
	on_end_start_jump_anim="animation('jump')"
	on_hit_by_player="die()"
	body_passthrough=true
		[animation]
		id=normal
		image=fumper.png
		rect=0,0,25,26
		collide_x=2
		collide_y=2
		collide_w=20
		collide_h=20
		feet_x=12
		feet_y=25
		frames=1
		duration=10
		accel_y=50
		[/animation]
		
		[animation]
		id=start_jump
		image=fumper.png
		rect=0,0,25,26
		collide_x=2
		collide_y=2
		collide_w=20
		collide_h=20
		feet_x=12
		feet_y=25
		frames=4
		duration=5
		accel_y=50
		[/animation]
		
		[animation]
		id=jump
		image=fumper.png
		rect=104,0,129,26
		collide_x=2
		collide_y=2
		collide_w=20
		collide_h=20
		feet_x=12
		feet_y=25
		frames=1
		duration=100000
		velocity_x=400
		velocity_y=-900
		accel_y=50
		[/animation]

		
		[animation]
		id=turn
		image=fumper.png
		rect=33,28,58,55
		collide_x=4
		collide_y=0
		collide_w=25
		collide_h=25
		feet_x=12
		feet_y=25
		frames=1
		duration=8
		accel_y=50
		[/animation]
		
		[animation]
		id=blink
		image=fumper.png
		rect=14,42,39,68
		collide_x=0
		collide_y=0
		collide_w=25
		collide_h=25
		feet_x=26
		feet_y=15
		frames=1
		duration=2
		accel_y=50
		[/animation]
		
	[/object_type]

	[object_type]
	id=shooting_plant
	hitpoints=1
	on_create="animation('normal')"
	on_end_normal_anim="if(facing != desired_facing, animation('turn'), animation('shoot')) where desired_facing = if(level.player.x < x, -1, 1)"
	on_end_shoot_anim="animation('normal')"
	on_end_turn_anim="[facing(if(level.player.x < x, -1, 1)), animation('normal')]"
	on_end_spring_anim="animation('normal')"
	on_hit_by_player="die()"
	on_die="spawn('die_cloud', x, y, facing)"
	on_jumped_on="animation('spring')"
	springiness=100
	on_shoot="spawn('pollen_ball', x + if(facing > 0, 18, -10), y-12, facing)"

		[animation]
		id=normal
		image=shooting-plant.png
		rect=16,0,32,35
		collide_x=2
		collide_y=16
		collide_w=13
		collide_h=15
		feet_x=9
		feet_y=32
		frames=1
		duration=30
		[/animation]

		[animation]
		id=shoot
		image=shooting-plant.png
		rect=16,0,32,35
		reverse=yes
		pad=0
		collide_x=2
		collide_y=16
		collide_w=13
		collide_h=15
		feet_x=9
		feet_y=32
		frames=3
		duration=12
		events="30:shoot"
		[/animation]

		[animation]
		id=turn
		image=shooting-plant.png
		rect=0,0,16,35
		collide_x=2
		collide_y=16
		collide_w=13
		collide_h=15
		feet_x=9
		feet_y=32
		frames=1
		duration=10
		[/animation]

		[animation]
		id=spring
		image=shooting-plant.png
		rect=0,36,19,59
		pad=0
		collide_x=2
		collide_y=5
		collide_w=13
		collide_h=15
		feet_x=9
		feet_y=20
		frames=5
		duration=10
		[/animation]

	[/object_type]

	[object_type]
	id=pollen_ball
	on_collide="die()"
	on_collide_head="die()"
	on_collide_feet="die()"
	on_process="set('rotate', cycle*10)"
	on_hit_player="die()"
	body_passthrough=yes
		[animation]
		id=normal
		image=shooting-plant.png
		rect=68,14,76,22
		collide_x=2
		collide_y=2
		collide_w=4
		collide_h=4
		frames=1
		duration=100000
		scale=2
		velocity_x=300
		velocity_y=-500
		accel_y=20
		[/animation]
	[/object_type]

	[object_type]
	id=dying_robot
	on_end_anim="if(cycle > 100, die(), if(green = 0, [set('green', 255), set('blue', 255), animation('normal')], [set('green', 0), set('blue', 0), animation('normal')]))"
	body_passthrough=yes
	body_harmful=no
	on_die="[spawn('dying_robot_main_fragment', x + if(facing > 0, 0, -100), y, facing),
             spawn('dying_robot_leg_fragment1', x + if(facing > 0, 50, -150), y + 30, facing),
             spawn('dying_robot_leg_fragment2', x + if(facing > 0, 20, -120), y + 30, facing)]
            "
		[animation]
		id=normal
		image=robot.png
		rect=0,42,47,82
		feet_x=23
		feet_y=40
		accel_y=80
		frames=1
		duration=3
		scale=2
		[/animation]
	[/object_type]

	[object_type]
	id=dying_robot_main_fragment
	on_end_anim="die()"
	body_passthrough=yes
	body_harmful=no
	ignore_collide=true
		[animation]
		id=normal
		image=robot.png
		rect=103,86,146,128
		accel_y=80
		velocity_x=800
		velocity_y=-1400
		frames=1
		duration=200
		scale=2
		[/animation]
	[/object_type]

	[object_type]
	id=dying_robot_leg_fragment1
	on_end_anim="die()"
	body_passthrough=yes
	body_harmful=no
	ignore_collide=true
		[animation]
		id=normal
		image=robot.png
		rect=184,7,204,37
		accel_y=80
		velocity_x=-800
		velocity_y=-1400
		frames=1
		duration=200
		scale=2
		[/animation]
	[/object_type]

	[object_type]
	id=dying_robot_leg_fragment2
	on_end_anim="die()"
	body_passthrough=yes
	body_harmful=no
	ignore_collide=true
		[animation]
		id=normal
		image=robot.png
		rect=162,7,178,30
		accel_y=80
		velocity_x=-800
		velocity_y=-1800
		frames=1
		duration=200
		scale=2
		[/animation]
	[/object_type]

	[object_type]
	id=robot_missile1
	on_players_side=true
	on_collide_with="[hit(collide_with), die()]"
	on_collide="die()"
	on_collide_head="die()"
	on_collide_feet="die()"
	on_die="spawn('explosion1', (x+5) - if(facing = -1, 30), y-15, facing)"
	on_end_normal_anim="if(cycle < 20, animation('normal'), die())"
		[animation]
		id=normal
		image=robot.png
		rect=57,1,86,9
		collide_x=14
		collide_y=0
		collide_w=15
		collide_h=10
		velocity_x=1000
		velocity_y=0
		frames=2
		duration=5
		scale=2
		[/animation]

		[animation]
		id=explode
		image=cannon.png
		x=0
		y=0
		w=0
		h=0
		frames=1
		duration=1
		events="1:explode" #must be a better way to do this
		[/animation]
	[/object_type]
	
	[object_type]
	id=robot_missile2
	on_players_side=true
	on_collide_with="[hit(collide_with), die()]"
	on_collide="die()"
	on_collide_head="die()"
	on_collide_feet="die()"
	on_die="spawn('explosion1', (x+5) - if(facing = -1, 30), y-15, facing)"
	on_end_normal_anim="if(cycle < 22, animation('normal'), die())"
		[animation]
		id=normal
		image=robot.png
		rect=57,11,94,22
		collide_x=14
		collide_y=0
		collide_w=23
		collide_h=11
		velocity_x=1200
		velocity_y=0
		frames=2
		duration=5
		scale=2
		[/animation]
	[/object_type]
	
	[object_type]
	id=robot_missile3
	on_players_side=true
	on_collide_with="[hit(collide_with), die()]"
	on_collide="die()"
	on_collide_head="die()"
	on_collide_feet="die()"
	on_die="spawn('explosion1', (x+5) - if(facing = -1, 30), y-15, facing)"
	on_end_normal_anim="if(cycle < 30, animation('normal'), die())"
		[animation]
		id=normal
		image=robot.png
		rect=57,23,84,30
		collide_x=14
		collide_y=0
		collide_w=13
		collide_h=10
		velocity_x=1500
		velocity_y=0
		frames=2
		duration=5
		scale=2
		[/animation]
	[/object_type]

	[object_type]
	id=dust_cloud
	body_harmful=no
	body_passthrough=yes
	on_end_normal_anim="animation('frame2')"
	on_end_frame2_anim="animation('frame3')"
	on_end_frame3_anim="animation('frame4')"
	on_end_frame4_anim="animation('frame5')"
	on_end_frame5_anim="animation('frame6')"
	on_end_frame6_anim="die()"
		[animation]
		id=normal
		image=explosion.png
		rect=105,7,191,34
		duration=4
		[/animation]
		[animation]
		id=frame2
		image=explosion.png
		rect=105,38,191,65
		duration=4
		[/animation]
		[animation]
		id=frame3
		image=explosion.png
		rect=105,69,191,96
		duration=4
		[/animation]
		[animation]
		id=frame4
		image=explosion.png
		rect=105,100,191,127
		duration=4
		[/animation]
		[animation]
		id=frame5
		image=explosion.png
		rect=105,131,191,158
		duration=4
		[/animation]
		[animation]
		id=frame6
		image=explosion.png
		rect=105,162,191,189
		duration=4
		[/animation]
	[/object_type]
	
	[object_type]
	id=explosion1
	body_harmful=no
	body_passthrough=yes
	on_end_normal_anim="animation('anim2')"
	on_end_anim2_anim="animation('anim3')"
	on_end_anim3_anim="die()"
		[animation]
		id=normal
		image=explosion.png
		rect=3,29,33,59
		frames=3
		pad=3
		duration=3
		[/animation]
		[animation]
		id=anim2
		image=explosion.png
		rect=3,63,33,93
		frames=3
		pad=3
		duration=3
		[/animation]
		[animation]
		id=anim3
		image=explosion.png
		rect=3,97,33,127
		frames=3
		pad=3
		duration=3
		[/animation]
	[/object_type]
	
	[object_type]
	id=missile_trail1
	body_harmful=no
	body_passthrough=yes
	on_end_anim="die()"
	[animation]
	id=normal
	image=robot.png
	rect=39,32,45,38
	frames=3
	duration=1
	[/animation]
	[/object_type]

[/object_types]
