{
friction: 1000,
id: "kitty_sword_npc",
vars: {
	animation_counter: 3,
	turns_at_cliffs: 1,
	turns_towards_player: 1,
},
on_create: "animation('stand')",
on_end_brandish_anim: "animation('stand')",
on_end_charge_brandish_anim: "animation('brandish')",
on_end_jump_attack_anim: "animation('stand')",
on_end_lunge_attack_anim: "animation('stand')",
on_end_stand_anim: "animation('stand')",
on_end_walk_anim: "animation('walk')",
on_end_walkSad_anim: "animation('walkSad')",
on_process_jump: "if(is_standing, animation('stand'))",
on_end_extend_sword_anim: "animation('stand')",
on_enter_extend_sword_anim: "[spawn('metal_specular_sparkle', midpoint_x+40*facing, midpoint_y,facing),sound('sword-draw'+1d8+'.wav')]",
on_end_swordBreak_anim: "[set(vars.animation_counter, 3),animation('blinkBroken')]",
on_end_blinkBroken_anim: "if(vars.animation_counter > 0, [set(vars.animation_counter, vars.animation_counter - 1),animation('blinkBroken')], schedule(10,animation('raiseBroken')))",
on_end_raiseBroken_anim: "[set(vars.animation_counter, 3),animation('raiseBlinkBroken')]",
on_end_raiseBlinkBroken_anim: "if(vars.animation_counter > 0, [set(vars.animation_counter, vars.animation_counter - 1),animation('raiseBlinkBroken')], schedule(10,animation('lowerBroken')))",
on_end_lowerBroken_anim: "animation('lowerBrokenSniffle')",
on_end_lowerBrokenSniffle_anim: "animation('lowerBrokenSniffle')",
on_shatter: "[map([0] * 5, spawn('kitty_sword_npc.fragment', midpoint_x + (50+1d5)*facing, midpoint_y - 1d10-5, facing)),sound('SwordBreak.ogg')]",
solid_area: [13,8,23,33],
solid_dimensions: ["null"],

on_footfall: "[sound('kitty-footstep'+1d10+'.wav', volume)] where volume = constrain(0, 300.0/distance(self, level.player),1.0)",

animation: [
	{
		"@base": true,
		image: "enemies/kitty-sword.png",
		pad: 3,
		body_area: "all",
		accel_x: 0,
		accel_y: 80,
	},
	{
		#special one-frame of him pointing his sword at someone.
		id: "extend_sword",
		rect: [127,255,186,290],
		duration: 300,
	},
	{
		accel_x: 360,
		duration: 6,
		frames: 4,
		id: "walkSad",
		rect: [295,80,342,115],
		solid_area: [13,6,23,31],
		events: "0:12:footfall",
	},
	{
		duration: 15,
		frames: 8,
		frames_per_row: 4,
		id: "swordBreak",
		events: "90:shatter",
		rect: [1,310,63,347],
		solid_area: [13,9,23,34],
	},
	{
		duration: 10,
		frames: 2,
		id: "blinkBroken",
		rect: [276,310,338,347],
		solid_area: [13,9,23,34],
	},
	{
		duration: 10,
		frames: 1,
		id: "raiseBroken",
		rect: [276,351,338,388],
		solid_area: [13,9,23,34],
	},
	{
		duration: 10,
		frames: 2,
		id: "raiseBlinkBroken",
		rect: [346,351,408,388],
		solid_area: [13,9,23,34],
	},
	{
		duration: 10,
		frames: 1,
		id: "lowerBroken",
		rect: [276,392,338,429],
		solid_area: [13,9,23,34],
	},
	{
		duration: 10,
		frames: 2,
		id: "lowerBrokenSniffle",
		rect: [342,392,404,429],
		solid_area: [13,9,23,34],
	},
	{
		id: "stand",
		duration: 6,
		frames: 3,
		reverse: true,
		rect: [1,1,41,36],
		duplicates: 10,
	},

	#blink variation of standing
	{
		id: "stand",
		duration: 6,
		frames: 3,
		reverse: true,
		rect: [133,1,173,36],
	},
	{
		accel_x: 300,
		id: "walk",
		frames: 4,
		duration: 6,
		events: "0:12:footfall",
		rect: [295,41,332,76],
	},
	{
		duration: 8,
		frames: 3,
		id: "jump",
		rect: [1,198,41,251],
		reverse: true,
		solid_area: [13,29,23,54],
	},
	{
		duration: 6,
		frames: 3,
		id: "charge_brandish",
		rect: [1,79,41,114],
		reverse: false,
	},
	{
		duration: 6,
		frames: 3,
		id: "brandish",
		rect: [1,118,55,153],
		reverse: false,
	},
	{
		duration: 6,
		frames: 3,
		id: "sword_extend",
		rect: [1,1,41,36],
		reverse: true,
	},
],
object_type: {
	id: "fragment",
		dies_on_inactive: true,
		solid_dimensions: ["effects"],
		friction: 2000,
		has_feet: false,
		on_create: "[animation('normal'),set(velocity_x, (1d1000-500)), set(velocity_y, -1d600-200), set(rotate, 1d4*90), 
			]",
		on_collide_feet: "[set(velocity_y, -(velocity_y*600)/1000),if(velocity_y < 200 and animation='normal', animation('settled')),if(velocity_y < 40, set(velocity_y,0))]",
		on_collide_side: "set(velocity_x, -(velocity_x*850)/1000)",
		timer_frequency: 5,
		on_timer: "if(animation in ['normal'],add(rotate, 15))",
		on_end_anim: "animation('normal')",
		on_end_settled_anim: "die()",
		on_enter_water: "animation('settled')",
		on_die: "spawn('breakable_block_chunk.particle_system_holder', x,y,facing)",
		zorder: 12,
		solid_area: [9,9,10,10],
		load_variations: "big",
		animation: [
			{
				image: "effects/particles3.png",
				accel_y: 40,
				duration: 5,
				pad: 3,
				body_area: null,
				id: "normal",
				rect: [1,141,17,157],
				frames: 6,
			},
			{
				image: "effects/particles3.png",
				accel_y: 40,
				duration: 100,
				pad: 3,
				body_area: null,
				id: "settled",
				rect: [1,141,17,157],
				frames: 1,
			},
		],
		object_type: {
			id: "particle_system_holder",
			zorder: 100,
			hitpoints: 300,
			dies_on_inactive: true,
			timer_frequency: 10,
			on_create: "[set(velocity_x, 0), set(velocity_y, 0), set(animation, 'normal'),
						add_particles('particles'),
						]",
			on_timer: "set(hitpoints, hitpoints-10)",
			on_turnOff: "[set(particles.generation_rate, 0)]",
			animation: {
				accel_y: 0,
				accel_x: 0,
				id: "normal",
				image: "effects/particles2.png",
				events: "2:turnOff",
				duration: 10000,
				x: 0,
				y: 0,
				w: 0,
				h: 0,
			},
			particle_system: {
				id: "particles",
				type: "point",
				dot_rounded: true,
				generation_rate_millis: 10000,
				time_to_live: 60,
				time_to_live_rand: 24,
				colors: ["f4dcbbff","cdbaa7ff","a88e81aa","7b535e88","692c4155"],
				pos_x: 0,
				pos_y: 0,
				pos_x_rand: 30,
				pos_y_rand: 30,
				velocity_x: -500,
				velocity_x_rand: 1000,
				velocity_y: -500,
				velocity_y_rand: 1000,
				dot_size: 3,
			},
		},




},
}