[editor_scripts]

[script]
id="Height Map"
script="
def prettify_platform(left, right, ypos)
  add_object('tree-stage1', (left + right)/2, ypos - 255, 1)
;

def generate_heights(tile_id, left, top, right, bottom, last_height)
  if(left < right and height < bottom,
     [prettify_platform(left*32, min(right, left + platform_length)*32, height*32),
	  add_tiles(tile_id, left, height, min(right, left + platform_length), bottom),
	  generate_heights(tile_id, left + platform_length, top, right, bottom, height)])
		  where platform_length = 2d6, height = last_height + (1d5 - 1d5);

      generate_heights('grk', left, top, right, bottom, (top+bottom)/2)
         where top = min(map(cells, y)), bottom = max(map(cells, y)),
		       left = min(map(cells, x)), right = max(map(cells, x))"
[/script]

[script]
id="Add Grass"
script="
map(cells, if(find(down.tiles, 'tile', tile = 'grk') and (not find(tiles, 'tile', tile = 'grk')), add_tiles('grs', x, y)))"
[/script]
[/editor_scripts]
