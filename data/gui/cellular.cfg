[gui]
  on_draw="[
    draw_animation('health_con',20,1020),
    draw_animation('health_lvl',22,1167-level.player.hitpoints*2),
    if(level.player.hitpoints < 15,draw_animation('health_alert',20,979)),
    draw_animation('energy_con',71,1020),
  ]"

  on_process="[
    if(level.player.hitpoints < 15,
      if(cycle-object.last_sound > 20, [
	sound('MenuDisConfirm.ogg'),
	sound('laser.ogg'),
	set(object.last_sound,cycle)
      ])
    )
  ]"

  [animation]
    id=health_con
    image=experimental/cellular/health_bar_container.png
    rect=0,0,21,81
  [/animation]
  [animation]
    id=health_lvl
    image=experimental/cellular/health_bar_level.png
    rect=2,2,21,7
  [/animation]
  [animation]
    id=health_alert
    image=experimental/cellular/health_warning.png
    rect=1,1,22,18
    frames=3
    duration=5
    pad=1
  [/animation]

  [animation]
    id=energy_con
    image=experimental/cellular/energy_bar_container.png
    rect=0,0,5,81
  [/animation]
[/gui]
