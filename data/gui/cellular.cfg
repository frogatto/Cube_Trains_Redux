[gui]
  on_draw="[
    draw_animation('health_con',20,1020),
    draw_animation('health_lvl',22,1167-level.player.hitpoints*2),
    draw_animation('energy_con',71,1020),
    draw_animation('energy_lvl',71,1180-level.player.vars.energy/10),

    if(level.player.hitpoints < 15,[
      if(cycle-object.last_sound < 5,[
	draw_animation('health_alert1',20,979)
      ]),
      if(cycle-object.last_sound > 5 and cycle-object.last_sound < 10,[
	draw_animation('health_alert2',20,979)
      ]),
      if(cycle-object.last_sound > 10,[
	draw_animation('health_alert3',20,979)
      ]),
    ])
  ]"

  on_process="[
    if(level.player.hitpoints < 15,
      if(cycle-object.last_sound > 15, [
	sound('MenuDisConfirm.ogg'),
	set(object.last_sound,cycle)
      ])
    ),
    debug(level.player.vars.energy)
  ]"

  [animation]
    id=health_con
    image=experimental/cellular/health_bar_container.png
    rect=0,0,21,81
  [/animation]
  [animation]
    id=health_lvl
    image=experimental/cellular/health_bar_level.png
    rect=2,2,21,7
  [/animation]

  [animation]
    id=health_alert1
    image=experimental/cellular/health_warning.png
    rect=1,1,22,18
    pad=1
  [/animation]
  [animation]
    id=health_alert2
    image=experimental/cellular/health_warning.png
    rect=24,1,45,18
    pad=1
  [/animation]
  [animation]
    id=health_alert3
    image=experimental/cellular/health_warning.png
    rect=47,1,68,18
    pad=1
  [/animation]

  [animation]
    id=energy_con
    image=experimental/cellular/energy_bar_container.png
    rect=0,0,5,81
  [/animation]
  [animation]
    id=energy_lvl
    image=experimental/cellular/energy_bar_level.png
    rect=2,2,7,7
  [/animation]
[/gui]
