[gui]
no_compile_image="gui/progress-bar-center.png,gui/progress-bar-endcaps.png,gui/progress-bar-well-center.png"
on_process="[if(object.vars.score < level.player.vars.score*100, set(object.vars, 'score', object.vars.score + diff/20 + 1) where diff = level.player.vars.score*100 - object.vars.score),

	if(object.vars.score = null(), set(object.vars.score, level.player.vars.score*100)),

	if(object.vars.coins != level.player.vars.coins*100, set(object.vars.coins, object.vars.coins + diff/20 + if(diff > 0, 1, -1)) where diff = level.player.vars.coins*100 - object.vars.coins),
	
	if(object.vars.coins = null(), set(object.vars.coins, level.player.vars.coins*100)),

    if(object.vars.bosses or object.vars.boss_hitpoints,
	   [if(target_hitpoints <= 0, set(objects.vars.bosses, [])),
	    if(object.vars.boss_hitpoints != target_hitpoints,
			 set(object.vars.boss_hitpoints, object.vars.boss_hitpoints +
			         if(target_hitpoints > object.vars.boss_hitpoints, 1, -1)))
	    ] where target_hitpoints = if(object.vars.bosses, (32*sum(map(object.vars.bosses, if(boss_hitpoints != null(), boss_hitpoints, hitpoints))))/sum(map(object.vars.bosses, if(boss_max_hitpoints != null(), boss_max_hitpoints, max_hitpoints))), 0)),
	
	if(object.vars.powerup_time != level.player.vars.powerup_time,
		    set(object.vars.powerup_time, object.vars.powerup_time + max(-2, min(10, level.player.vars.powerup_time - object.vars.powerup_time)))
	    )
	]"
on_draw="[
	       switch(level.player.type,
				 'frogatto_playable', draw_animation('frogatto_portrait', 10, 10),
				 'nene_playable', draw_animation('nene_portrait', 10, 10),
				 'pato_playable', draw_animation('pato_portrait', 10, 10)),

		   switch(level.player.type,
			      'frogatto_playable', if(level.player.vars.has_energy_shot, draw_animation('bar_frame', 10, 48)),
			      'nene_playable', draw_animation('bar_frame', 10, 48),
			      'pato_playable', draw_animation('bar_frame', 10, 48)),
		
		if(IPHONE_SYSTEM,
			if((not level.player.underwater_controls),
				[
				if(level.player.ctrl_up,
					[color(255, 255, 255, 255), draw_animation('iphone_up_pressed', 159, SCREEN_HEIGHT-186)],
					[color(255, 255, 255, 128), draw_animation('iphone_up', 159, SCREEN_HEIGHT-184)]),

			    if(level.player.ctrl_down,
					[color(255, 255, 255, 255), draw_animation('iphone_down_pressed', 159, SCREEN_HEIGHT-62)],
					[color(255, 255, 255, 128), draw_animation('iphone_down', 159, SCREEN_HEIGHT-64)]),

			    if(level.player.ctrl_left,
					[color(255, 255, 255, 255), draw_animation('iphone_left_pressed', 8, SCREEN_HEIGHT-100)],
					[color(255, 255, 255, 128), draw_animation('iphone_left', 10, SCREEN_HEIGHT-100)]),

			    if(level.player.ctrl_right,
					[color(255, 255, 255, 255), draw_animation('iphone_right_pressed', 246, SCREEN_HEIGHT-100)],
					[color(255, 255, 255, 128), draw_animation('iphone_right', 244, SCREEN_HEIGHT-100)]),

			    if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
				draw_animation('iphone_a', SCREEN_WIDTH-122, SCREEN_HEIGHT-240),

			    if(level.player.ctrl_jump, color(255, 255, 255, 255), color(255, 255, 255, 128)),
				draw_animation('iphone_b', SCREEN_WIDTH-204, SCREEN_HEIGHT-120),

				color(255, 255, 255, 255),

				if(level.player.can_interact, draw_animation('iphone_action', SCREEN_WIDTH-320, SCREEN_HEIGHT-120))
			],

			#controls when underwater#
			[
			    if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
				draw_animation('iphone_a', SCREEN_WIDTH-122, SCREEN_HEIGHT-240),
			    color(255, 255, 255, 255)],
			
			)),
	draw_animation('score_background', 48, 10),
	draw_number(object.vars.score, 7, 52, 14),
	draw_animation('gold_background', 178, 10),
	draw_number(object.vars.coins, 5, 202, 14),


    slice(
	[
	  draw_animation('heart_full', 52+24*0,32),
	  draw_animation('heart_full', 52+24*1,32),
	  draw_animation('heart_full', 52+24*2,32),
	  draw_animation('heart_full', 52+24*3,32),
	  draw_animation('heart_full', 52+24*4,32),
	  draw_animation('heart_full', 52+24*5,32),
	  draw_animation('heart_full', 52+24*6,32),
	  draw_animation('heart_full', 52+24*7,32),
	  draw_animation('heart_full', 52+24*8,32),
	  draw_animation('heart_full', 52+24*9,32),
	  draw_animation('heart_full', 52+24*10,32),
	], 0, max(0, level.player.hitpoints/2)),

    slice(
	[
	  draw_animation('heart_empty', 52+24*0,32),
	  draw_animation('heart_empty', 52+24*1,32),
	  draw_animation('heart_empty', 52+24*2,32),
	  draw_animation('heart_empty', 52+24*3,32),
	  draw_animation('heart_empty', 52+24*4,32),
	  draw_animation('heart_empty', 52+24*5,32),
	  draw_animation('heart_empty', 52+24*6,32),
	  draw_animation('heart_empty', 52+24*7,32),
	  draw_animation('heart_empty', 52+24*8,32),
	  draw_animation('heart_empty', 52+24*9,32),
	  draw_animation('heart_empty', 52+24*10,32),
	], max(0, (level.player.hitpoints+1)/2), level.player.max_hitpoints/2),

    if(level.player.hitpoints > 0 and level.player.hitpoints%2,
	[
	  draw_animation('heart_half', 52+24*0,32),
	  draw_animation('heart_half', 52+24*1,32),
	  draw_animation('heart_half', 52+24*2,32),
	  draw_animation('heart_half', 52+24*3,32),
	  draw_animation('heart_half', 52+24*4,32),
	  draw_animation('heart_half', 52+24*5,32),
	  draw_animation('heart_half', 52+24*6,32),
	  draw_animation('heart_half', 52+24*7,32),
	  draw_animation('heart_half', 52+24*8,32),
	  draw_animation('heart_half', 52+24*9,32),
	  draw_animation('heart_half', 52+24*10,32),
	] [level.player.hitpoints/2]),

	if(level.player.consts.tank_size, [draw_animation('bar_frame', 10, 50),
	map(range(max(0, (level.player.vars.tank_fuel*4)/level.player.consts.tank_size)), 'n', draw_animation('bar_element', 14 + n*20, 54))]),

	if(energy_charge > 0,
		if(energy_charge < 20,
		   [draw_animation_area('charge_bar_left', 14, 52, energy_charge/4),
		    draw_animation_area('charge_bar_right', 12 + energy_charge/2, 52, 5 - energy_charge/4, 0, energy_charge/4, 5)],
		   [
		    draw_animation('charge_bar_left', 14, 52),
		    draw_animation('charge_bar_right', 14 + energy_charge - 12, 52),
	        draw_animation_area('charge_bar_center', 14 + 10, 52, (energy_charge - 20)/2)
		   ]
	    )
	 )
     where energy_charge = if(level.player.vars.charge_time = 0, 0, (level.player.energy_charge*75)/level.player.vars.charge_time - 5),
	
	if(object.vars.boss_hitpoints,
		 [draw_animation('charge_bar_well_left', 90, SCREEN_HEIGHT - 44),
		 draw_animation_area('charge_bar_well_center', 106, SCREEN_HEIGHT - 44, 310),
		 draw_animation('charge_bar_well_right', 90 + 620, SCREEN_HEIGHT - 44),
		 draw_text('door_label','BOSS:', 40, SCREEN_HEIGHT - 40),
		 
		 if(boss_hitpoints < 20,
		   [draw_animation_area('charge_bar_left', 94, SCREEN_HEIGHT - 40, boss_hitpoints/4),
		    draw_animation_area('charge_bar_right', 94 + boss_hitpoints/2, SCREEN_HEIGHT - 40, 5 - boss_hitpoints/4, 0, boss_hitpoints/4, 5)],

		[draw_animation('charge_bar_left', 94, SCREEN_HEIGHT - 40),
		 draw_animation('charge_bar_right', 94 + boss_hitpoints - 11, SCREEN_HEIGHT - 40),
		 draw_animation_area('charge_bar_center', 94 + 10, SCREEN_HEIGHT - 40, (boss_hitpoints - 20)/2)
		])]
	   
	   where boss_hitpoints = object.vars.boss_hitpoints*20
	 ),

	 if(object.vars.powerup_time > 20,
	   [draw_animation('charge_bar_left', 14, 70),
		draw_animation('charge_bar_right', 14 + object.vars.powerup_time - 11, 70),
	    draw_animation_area('charge_bar_center', 14 + 10, 70, (object.vars.powerup_time - 20)/2)
	   ]
	 )
	 
	]"
	### Character and weapon icons
	[animation]
	duration="6"
	frame_info="0,0,0,0,757,381,20,20"
	frames="1"
	id="frogatto_portrait"
	image="compiled-2.png"
	rect="757,381,776,400"
	[/animation]

	[animation]
	duration="6"
	frame_info="0,0,0,0,983,381,20,20"
	frames="1"
	id="frogatto_energy_ball_portrait"
	image="compiled-2.png"
	rect="983,381,1002,400"
	[/animation]

	[animation]
	duration="6"
	frame_info="0,0,0,0,875,381,20,20"
	frames="1"
	id="nene_portrait"
	image="compiled-2.png"
	rect="875,381,894,400"
	[/animation]

	[animation]
	duration="6"
	frame_info="0,0,0,0,1003,381,20,20"
	frames="1"
	id="nene_flamethrower_portrait"
	image="compiled-2.png"
	rect="1003,381,1022,400"
	[/animation]

	[animation]
	duration="6"
	frame_info="0,0,0,0,728,746,20,20"
	frames="1"
	id="pato_portrait"
	image="compiled-0.png"
	rect="728,746,747,765"
	[/animation]

	[animation]
	duration="6"
	frame_info="0,0,0,0,748,746,20,20"
	frames="1"
	id="pato_glove_portrait"
	image="compiled-0.png"
	rect="748,746,767,765"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,0,0,0,299,491,66,11"
	frames="1"
	id="score_background"
	image="compiled-2.png"
	rect="299,491,364,501"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,0,0,0,241,491,58,11"
	frames="1"
	id="gold_background"
	image="compiled-2.png"
	rect="241,491,298,501"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,1,0,1,1013,554,11,10"
	frames="1"
	id="small_heart_full"
	image="compiled-0.png"
	rect="1013,553,1023,564"
	[/animation]

	[animation]
	duration="100"
	frame_info="1,2,1,2,909,846,9,8"
	frames="1"
	id="small_heart_empty"
	image="compiled-0.png"
	rect="908,844,918,855"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,1,0,1,1013,544,11,10"
	frames="1"
	id="heart_full"
	image="compiled-0.png"
	rect="1013,543,1023,554"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,1,0,1,1013,554,11,10"
	frames="1"
	id="heart_half"
	image="compiled-0.png"
	rect="1013,553,1023,564"
	[/animation]

	[animation]
	duration="100"
	frame_info="0,1,0,1,1005,235,11,10"
	frames="1"
	id="heart_empty"
	image="compiled-0.png"
	rect="1005,234,1015,245"
	[/animation]

	[animation]
	frame_info="0,0,1,1,19,491,39,11"
	id="bar_frame"
	image="compiled-2.png"
	rect="19,491,58,502"
	[/animation]

	[animation]
	frame_info="0,0,1,1,996,117,11,7"
	id="bar_element"
	image="compiled-1.png"
	rect="996,117,1007,124"
	[/animation]

	[animation]
	id="charge_bar_center"
	image="gui/progress-bar-center.png"
	rect="0,0,7,7"
	[/animation]

	[animation]
	id="charge_bar_left"
	image="gui/progress-bar-endcaps.png"
	rect="3,0,7,6"
	[/animation]

	[animation]
	id="charge_bar_right"
	image="gui/progress-bar-endcaps.png"
	rect="0,8,4,14"
	[/animation]

	[animation]
	id="charge_bar_well_center"
	image="gui/progress-bar-well-center.png"
	rect="0,0,15,11"
	[/animation]

	[animation]
	frame_info="0,0,0,1,154,491,16,11"
	id="charge_bar_well_left"
	image="compiled-2.png"
	rect="154,491,169,502"
	[/animation]

	[animation]
	frame_info="0,0,0,1,170,491,16,11"
	id="charge_bar_well_right"
	image="compiled-2.png"
	rect="170,491,185,502"
	[/animation]

	#iPhone controls
	[animation]
	id="iphone_b"
	duration="1"
	frame_info="0,0,1,1,685,586,50,58"
	frames="1"
	image="compiled-0.png"
	rect="685,586,735,644"
	scale="2"
	[/animation]

	[animation]
	id="iphone_a"
	duration="1"
	frame_info="0,0,1,1,635,586,50,58"
	frames="1"
	image="compiled-0.png"
	rect="635,586,685,644"
	scale="2"
	[/animation]

	[animation]
	id="iphone_b_down"
	duration="1"
	frame_info="0,0,1,1,585,586,50,58"
	frames="1"
	image="compiled-0.png"
	rect="585,586,635,644"
	scale="3"
	[/animation]

	[animation]
	id="iphone_a_down"
	duration="1"
	frame_info="0,0,1,1,535,586,50,58"
	frames="1"
	image="compiled-0.png"
	rect="535,586,585,644"
	scale="3"
	[/animation]

	[animation]
	id="iphone_action"
	duration="1"
	frame_info="0,0,1,1,953,192,50,58"
	frames="1"
	image="compiled-1.png"
	rect="953,192,1003,250"
	scale="2"
	[/animation]

	[animation]
	id="iphone_action_down"
	duration="1"
	frame_info="0,0,1,1,903,192,50,58"
	frames="1"
	image="compiled-1.png"
	rect="903,192,953,250"
	scale="2"
	[/animation]

	[animation]
	id="iphone_up"
	duration="1"
	frame_info="0,2,1,0,750,317,46,53"
	frames="1"
	image="compiled-1.png"
	rect="750,315,796,369"
	scale="2"
	[/animation]

	[animation]
	id="iphone_up_pressed"
	duration="1"
	frame_info="0,2,1,0,956,586,46,53"
	frames="1"
	image="compiled-0.png"
	rect="956,584,1002,638"
	scale="2"
	[/animation]

	[animation]
	id="iphone_down"
	duration="1"
	frame_info="0,1,1,2,976,119,46,28"
	frames="1"
	image="compiled-2.png"
	rect="976,118,1022,148"
	scale="2"
	[/animation]

	[animation]
	id="iphone_down_pressed"
	duration="1"
	frame_info="0,1,1,2,0,175,46,28"
	frames="1"
	image="compiled-2.png"
	rect="0,174,46,204"
	scale="2"
	[/animation]

	[animation]
	id="iphone_left"
	duration="1"
	frame_info="1,0,2,1,748,471,72,46"
	frames="1"
	image="compiled-1.png"
	rect="747,471,821,517"
	scale="2"
	[/animation]

	[animation]
	id="iphone_left_pressed"
	duration="1"
	frame_info="1,0,2,1,597,471,72,46"
	frames="1"
	image="compiled-1.png"
	rect="596,471,670,517"
	scale="2s"
	[/animation]

	[animation]
	id="iphone_right"
	duration="1"
	frame_info="3,0,0,0,892,471,72,45"
	frames="1"
	image="compiled-1.png"
	rect="889,471,963,515"
	scale="2"
	[/animation]

	[animation]
	id="iphone_right_pressed"
	duration="1"
	frame_info="3,0,0,0,820,471,72,45"
	frames="1"
	image="compiled-1.png"
	rect="817,471,891,515"
	scale="2"
	[/animation]

[/gui]

