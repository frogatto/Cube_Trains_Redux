{
	"animation": [
		{
			"duration": 1,
			"frame_info": [1,1,1,1,168,439,56,56],
			"frames": 1,
			"id": "iphone_b_circle",
			"image": "compiled-1.png",
			"rect": [167,438,224,495],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,1,1,1,56,439,56,56],
			"frames": 1,
			"id": "iphone_a_circle",
			"image": "compiled-1.png",
			"rect": [55,438,112,495],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,2,1,0,112,439,56,56],
			"frames": 1,
			"id": "iphone_b_down_circle",
			"image": "compiled-1.png",
			"rect": [111,437,168,494],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,2,1,0,0,439,56,56],
			"frames": 1,
			"id": "iphone_a_down_circle",
			"image": "compiled-1.png",
			"rect": [-1,437,56,494],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,1,1,1,224,439,56,56],
			"frames": 1,
			"id": "iphone_action_circle",
			"image": "compiled-1.png",
			"rect": [223,438,280,495],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,2,1,0,280,439,56,56],
			"frames": 1,
			"id": "iphone_action_down_circle",
			"image": "compiled-1.png",
			"rect": [279,437,336,494],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,1,1,1,336,439,56,56],
			"frames": 1,
			"id": "iphone_jumpdown_circle",
			"image": "compiled-1.png",
			"rect": [335,438,392,495],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,2,1,0,392,439,56,56],
			"frames": 1,
			"id": "iphone_jumpdown_down_circle",
			"image": "compiled-1.png",
			"rect": [391,437,448,494],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,0,0,0,810,954,58,58],
			"frames": 1,
			"id": "iphone_spin_circle",
			"image": "compiled-0.png",
			"rect": [810,954,867,1011],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,746,744,68,68],
			"frames": 1,
			"id": "ipad_b_circle",
			"image": "compiled-0.png",
			"rect": [745,744,814,813],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,678,744,68,68],
			"frames": 1,
			"id": "ipad_a_circle",
			"image": "compiled-0.png",
			"rect": [677,744,746,813],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,942,885,68,68],
			"frames": 1,
			"id": "ipad_b_down_circle",
			"image": "compiled-0.png",
			"rect": [941,885,1010,954],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,806,885,68,68],
			"frames": 1,
			"id": "ipad_a_down_circle",
			"image": "compiled-0.png",
			"rect": [805,885,874,954],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,874,885,68,68],
			"frames": 1,
			"id": "ipad_action_circle",
			"image": "compiled-0.png",
			"rect": [873,885,942,954],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [1,0,1,2,814,744,68,68],
			"frames": 1,
			"id": "ipad_jumpdown_circle",
			"image": "compiled-0.png",
			"rect": [813,744,882,813],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,0,0,942,531,70,70],
			"frames": 1,
			"id": "ipad_spin_circle",
			"image": "compiled-0.png",
			"rect": [942,531,1011,600],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,960,194,50,58],
			"frames": 1,
			"id": "iphone_b",
			"image": "compiled-1.png",
			"rect": [960,194,1010,252],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,890,130,50,58],
			"frames": 1,
			"id": "iphone_a",
			"image": "compiled-1.png",
			"rect": [890,130,940,188],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,840,130,50,58],
			"frames": 1,
			"id": "iphone_b_down",
			"image": "compiled-1.png",
			"rect": [840,130,890,188],
			"scale": 3
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,972,954,50,58],
			"frames": 1,
			"id": "iphone_a_down",
			"image": "compiled-0.png",
			"rect": [972,954,1022,1012],
			"scale": 3
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,760,954,50,58],
			"frames": 1,
			"id": "iphone_action",
			"image": "compiled-0.png",
			"rect": [760,954,810,1012],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,868,954,50,58],
			"frames": 1,
			"id": "iphone_action_down",
			"image": "compiled-0.png",
			"rect": [868,954,918,1012],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,2,1,0,836,439,46,53],
			"frames": 1,
			"id": "iphone_up",
			"image": "compiled-1.png",
			"rect": [836,437,882,491],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,2,1,0,882,439,46,53],
			"frames": 1,
			"id": "iphone_up_pressed",
			"image": "compiled-1.png",
			"rect": [882,437,928,491],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,1,1,2,955,435,46,28],
			"frames": 1,
			"id": "iphone_down",
			"image": "compiled-2.png",
			"rect": [955,434,1001,464],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,1,1,2,496,464,46,28],
			"frames": 1,
			"id": "iphone_down_pressed",
			"image": "compiled-2.png",
			"rect": [496,463,542,493],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [7,9,9,8,959,404,64,95],
			"frames": 1,
			"id": "iphone_left",
			"image": "compiled-0.png",
			"rect": [952,395,1031,506],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [7,10,9,7,895,404,64,95],
			"frames": 1,
			"id": "iphone_left_pressed",
			"image": "compiled-0.png",
			"rect": [888,394,967,505],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [10,9,6,8,468,531,64,95],
			"frames": 1,
			"id": "iphone_right",
			"image": "compiled-0.png",
			"rect": [458,522,537,633],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [10,10,6,7,404,531,64,95],
			"frames": 1,
			"id": "iphone_right_pressed",
			"image": "compiled-0.png",
			"rect": [394,521,473,632],
			"scale": 2
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,960,194,50,58],
			"frames": 1,
			"id": "ipad_b",
			"image": "compiled-1.png",
			"rect": [960,194,1010,252],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,890,130,50,58],
			"frames": 1,
			"id": "ipad_a",
			"image": "compiled-1.png",
			"rect": [890,130,940,188],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,840,130,50,58],
			"frames": 1,
			"id": "ipad_b_down",
			"image": "compiled-1.png",
			"rect": [840,130,890,188],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,972,954,50,58],
			"frames": 1,
			"id": "ipad_a_down",
			"image": "compiled-0.png",
			"rect": [972,954,1022,1012],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,760,954,50,58],
			"frames": 1,
			"id": "ipad_action",
			"image": "compiled-0.png",
			"rect": [760,954,810,1012],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,0,1,1,868,954,50,58],
			"frames": 1,
			"id": "ipad_action_down",
			"image": "compiled-0.png",
			"rect": [868,954,918,1012],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,2,1,0,836,439,46,53],
			"frames": 1,
			"id": "ipad_up",
			"image": "compiled-1.png",
			"rect": [836,437,882,491],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,2,1,0,882,439,46,53],
			"frames": 1,
			"id": "ipad_up_pressed",
			"image": "compiled-1.png",
			"rect": [882,437,928,491],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,1,1,2,955,435,46,28],
			"frames": 1,
			"id": "ipad_down",
			"image": "compiled-2.png",
			"rect": [955,434,1001,464],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [0,1,1,2,496,464,46,28],
			"frames": 1,
			"id": "ipad_down_pressed",
			"image": "compiled-2.png",
			"rect": [496,463,542,493],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [7,9,8,8,900,254,81,127],
			"frames": 1,
			"id": "ipad_left",
			"image": "compiled-0.png",
			"rect": [893,245,988,388],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [7,10,8,7,900,127,81,127],
			"frames": 1,
			"id": "ipad_left_pressed",
			"image": "compiled-0.png",
			"rect": [893,117,988,260],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [8,9,7,8,900,0,81,127],
			"frames": 1,
			"id": "ipad_right",
			"image": "compiled-0.png",
			"rect": [892,-9,987,134],
			"scale": 1
		},
		{
			"duration": 1,
			"frame_info": [8,10,7,7,0,404,81,127],
			"frames": 1,
			"id": "ipad_right_pressed",
			"image": "compiled-0.png",
			"rect": [-8,394,87,537],
			"scale": 1
		}
	],
	"on_draw": "if(IPHONE_SYSTEM,
			if((not level.player.underwater_controls),
				[
				map(['up', 'down', 'left', 'right'], 'i',
					if(b.anim,
						if(query(level.player, 'ctrl_'+i),
						[color(255, 255, 255, 255), draw_animation(b.anim_down, b.x, b.y)],
						[color(255, 255, 255, 128), draw_animation(b.anim, b.x, b.y)])
					)
					where b = find(object.vars.buttons, 'button', button['id'] = i)
				),

			    [
					if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
					if(a.anim, draw_animation(if(level.player.ctrl_tongue,a.anim_down,a.anim), if(level.player.ctrl_reverse_ab, b, a).x, if(level.player.ctrl_reverse_ab, b, a).y)),

					if(level.player.ctrl_jump, color(255, 255, 255, 255), color(255, 255, 255, 128)),
					if(b.anim, (draw_animation(if(level.player.ctrl_jump,b.anim_down,b.anim), if(level.player.ctrl_reverse_ab, a, b).x, if(level.player.ctrl_reverse_ab, a, b).y)))
				]
				where b = find(object.vars.buttons, 'button', button['id'] = 'b')
				where a = find(object.vars.buttons, 'button', button['id'] = 'a'),

				color(255, 255, 255, 255),

				if(level.player.can_interact and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'interact'),

				if(level.player.is_standing_on_platform and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'jump_down'),

				if((not level.player.is_standing) and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'spin')
				],

				#controls when underwater#
				[
					[
						if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
						if(a.anim, draw_animation(a.anim, if(level.player.ctrl_reverse_ab, b, a).x, if(level.player.ctrl_reverse_ab, b, a).y)),
					]
					where b = find(object.vars.buttons, 'button', button['id'] = 'b')
					where a = find(object.vars.buttons, 'button', button['id'] = 'a'),
					color(255, 255, 255, 255)
				]
			))",
	"on_process": "if (object.vars.scheme_loaded != level.player.control_scheme,
			[
			set(object.vars.buttons,
				map(control_scheme_node.elements.button, 'button',
					{'id' -> button.id, 'x' -> eval(button.x), 'y' -> eval(button.y), 'anim' -> button.anim, 'anim_down' -> button.anim_down})
				where control_scheme_node = find(get_document('data/control_schemes.cfg').elements.control_scheme, id = level.player.control_scheme)),
			set(object.vars.scheme_loaded, level.player.control_scheme)
			])"
}