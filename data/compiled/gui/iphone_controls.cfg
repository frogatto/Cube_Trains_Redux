[gui]
on_process="if (object.vars.scheme_loaded != level.player.control_scheme,
			[
			set(object.vars.buttons,
				map(control_scheme_node.elements.button, 'button',
					{'id' -> button.id, 'x' -> eval(button.x), 'y' -> eval(button.y), 'anim' -> button.anim, 'anim_down' -> button.anim_down})
				where control_scheme_node = find(get_document('data/control_schemes.cfg').elements.control_scheme, id = level.player.control_scheme)),
			set(object.vars.scheme_loaded, level.player.control_scheme)
			])"
on_draw="if(IPHONE_SYSTEM,
			if((not level.player.underwater_controls),
				[
				map(['up', 'down', 'left', 'right'], 'i',
					if(b.anim,
						if(query(level.player, 'ctrl_'+i),
						[color(255, 255, 255, 255), draw_animation(b.anim_down, b.x, b.y)],
						[color(255, 255, 255, 128), draw_animation(b.anim, b.x, b.y)])
					)
					where b = find(object.vars.buttons, 'button', button['id'] = i)
				),

			    [
					if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
					if(a.anim, draw_animation(if(level.player.ctrl_tongue,a.anim_down,a.anim), if(level.player.ctrl_reverse_ab, b, a).x, if(level.player.ctrl_reverse_ab, b, a).y)),

					if(level.player.ctrl_jump, color(255, 255, 255, 255), color(255, 255, 255, 128)),
					if(b.anim, (draw_animation(if(level.player.ctrl_jump,b.anim_down,b.anim), if(level.player.ctrl_reverse_ab, a, b).x, if(level.player.ctrl_reverse_ab, a, b).y)))
				]
				where b = find(object.vars.buttons, 'button', button['id'] = 'b')
				where a = find(object.vars.buttons, 'button', button['id'] = 'a'),

				color(255, 255, 255, 255),

				if(level.player.can_interact and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'interact'),

				if(level.player.is_standing_on_platform and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'jump_down'),

				if((not level.player.is_standing) and b.anim, draw_animation(b.anim, b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'spin')
				],

				#controls when underwater#
				[
					[
						if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 128)),
						if(a.anim, draw_animation(a.anim, if(level.player.ctrl_reverse_ab, b, a).x, if(level.player.ctrl_reverse_ab, b, a).y)),
					]
					where b = find(object.vars.buttons, 'button', button['id'] = 'b')
					where a = find(object.vars.buttons, 'button', button['id'] = 'a'),
					color(255, 255, 255, 255)
				]
			))"
	[animation]
	id="iphone_b_circle"
	duration="1"
	frame_info="1,1,1,1,222,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="221,250,278,307"
	scale="2"
	[/animation]

	[animation]
	id="iphone_a_circle"
	duration="1"
	frame_info="1,1,1,1,278,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="277,250,334,307"
	scale="2"
	[/animation]

	[animation]
	id="iphone_b_down_circle"
	duration="1"
	frame_info="1,2,1,0,390,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="389,249,446,306"
	scale="2"
	[/animation]

	[animation]
	id="iphone_a_down_circle"
	duration="1"
	frame_info="1,2,1,0,446,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="445,249,502,306"
	scale="2"
	[/animation]

	[animation]
	id="iphone_action_circle"
	duration="1"
	frame_info="1,1,1,1,558,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="557,250,614,307"
	scale="2"
	[/animation]

	[animation]
	id="iphone_action_down_circle"
	duration="1"
	frame_info="1,2,1,0,0,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="-1,249,56,306"
	scale="2"
	[/animation]

	[animation]
	id="iphone_jumpdown_circle"
	duration="1"
	frame_info="1,1,1,1,502,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="501,250,558,307"
	scale="2"
	[/animation]

	[animation]
	id="iphone_jumpdown_down_circle"
	duration="1"
	frame_info="1,2,1,0,334,251,56,56"
	frames="1"
	image="compiled-1.png"
	rect="333,249,390,306"
	scale="2"
	[/animation]

	[animation]
	id="iphone_spin_circle"
	duration="1"
	frame_info="0,0,0,0,684,965,58,58"
	frames="1"
	image="compiled-0.png"
	rect="684,965,741,1022"
	scale="2"
	[/animation]

	[animation]
	id="ipad_b_circle"
	duration="1"
	frame_info="1,0,1,2,806,700,68,68"
	frames="1"
	image="compiled-0.png"
	rect="805,700,874,769"
	scale="1"
	[/animation]

	[animation]
	id="ipad_a_circle"
	duration="1"
	frame_info="1,0,1,2,942,700,68,68"
	frames="1"
	image="compiled-0.png"
	rect="941,700,1010,769"
	scale="1"
	[/animation]

	[animation]
	id="ipad_b_down_circle"
	duration="1"
	frame_info="1,0,1,2,532,630,68,68"
	frames="1"
	image="compiled-0.png"
	rect="531,630,600,699"
	scale="1"
	[/animation]

	[animation]
	id="ipad_a_down_circle"
	duration="1"
	frame_info="1,0,1,2,874,700,68,68"
	frames="1"
	image="compiled-0.png"
	rect="873,700,942,769"
	scale="1"
	[/animation]

	[animation]
	id="ipad_action_circle"
	duration="1"
	frame_info="1,0,1,2,600,630,68,68"
	frames="1"
	image="compiled-0.png"
	rect="599,630,668,699"
	scale="1"
	[/animation]

	[animation]
	id="ipad_jumpdown_circle"
	duration="1"
	frame_info="1,0,1,2,668,630,68,68"
	frames="1"
	image="compiled-0.png"
	rect="667,630,736,699"
	scale="1"
	[/animation]

	[animation]
	id="ipad_spin_circle"
	duration="1"
	frame_info="0,0,0,0,0,630,70,70"
	frames="1"
	image="compiled-0.png"
	rect="0,630,69,699"
	scale="1"
	[/animation]

	[animation]
	id="iphone_b"
	duration="1"
	frame_info="0,0,1,1,634,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="634,965,684,1023"
	scale="2"
	[/animation]

	[animation]
	id="iphone_a"
	duration="1"
	frame_info="0,0,1,1,584,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="584,965,634,1023"
	scale="2"
	[/animation]

	[animation]
	id="iphone_b_down"
	duration="1"
	frame_info="0,0,1,1,534,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="534,965,584,1023"
	scale="3"
	[/animation]

	[animation]
	id="iphone_a_down"
	duration="1"
	frame_info="0,0,1,1,484,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="484,965,534,1023"
	scale="3"
	[/animation]

	[animation]
	id="iphone_action"
	duration="1"
	frame_info="0,0,1,1,210,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="210,965,260,1023"
	scale="2"
	[/animation]

	[animation]
	id="iphone_action_down"
	duration="1"
	frame_info="0,0,1,1,376,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="376,965,426,1023"
	scale="2"
	[/animation]

	[animation]
	id="iphone_up"
	duration="1"
	frame_info="0,2,1,0,967,251,46,53"
	frames="1"
	image="compiled-1.png"
	rect="967,249,1013,303"
	scale="2"
	[/animation]

	[animation]
	id="iphone_up_pressed"
	duration="1"
	frame_info="0,2,1,0,909,307,46,53"
	frames="1"
	image="compiled-1.png"
	rect="909,305,955,359"
	scale="2"
	[/animation]

	[animation]
	id="iphone_down"
	duration="1"
	frame_info="0,1,1,2,936,356,46,28"
	frames="1"
	image="compiled-2.png"
	rect="936,355,982,385"
	scale="2"
	[/animation]

	[animation]
	id="iphone_down_pressed"
	duration="1"
	frame_info="0,1,1,2,890,356,46,28"
	frames="1"
	image="compiled-2.png"
	rect="890,355,936,385"
	scale="2"
	[/animation]

	[animation]
	id="iphone_left"
	duration="1"
	frame_info="7,9,9,8,881,333,64,95"
	frames="1"
	image="compiled-0.png"
	rect="874,324,953,435"
	scale="2"
	[/animation]

	[animation]
	id="iphone_left_pressed"
	duration="1"
	frame_info="7,10,9,7,817,333,64,95"
	frames="1"
	image="compiled-0.png"
	rect="810,323,889,434"
	scale="2"
	[/animation]

	[animation]
	id="iphone_right"
	duration="1"
	frame_info="10,9,6,8,689,333,64,95"
	frames="1"
	image="compiled-0.png"
	rect="679,324,758,435"
	scale="2"
	[/animation]

	[animation]
	id="iphone_right_pressed"
	duration="1"
	frame_info="10,10,6,7,753,333,64,95"
	frames="1"
	image="compiled-0.png"
	rect="743,323,822,434"
	scale="2"
	[/animation]

	[animation]
	id="ipad_b"
	duration="1"
	frame_info="0,0,1,1,634,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="634,965,684,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_a"
	duration="1"
	frame_info="0,0,1,1,584,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="584,965,634,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_b_down"
	duration="1"
	frame_info="0,0,1,1,534,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="534,965,584,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_a_down"
	duration="1"
	frame_info="0,0,1,1,484,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="484,965,534,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_action"
	duration="1"
	frame_info="0,0,1,1,210,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="210,965,260,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_action_down"
	duration="1"
	frame_info="0,0,1,1,376,965,50,58"
	frames="1"
	image="compiled-0.png"
	rect="376,965,426,1023"
	scale="1"
	[/animation]

	[animation]
	id="ipad_up"
	duration="1"
	frame_info="0,2,1,0,967,251,46,53"
	frames="1"
	image="compiled-1.png"
	rect="967,249,1013,303"
	scale="1"
	[/animation]

	[animation]
	id="ipad_up_pressed"
	duration="1"
	frame_info="0,2,1,0,909,307,46,53"
	frames="1"
	image="compiled-1.png"
	rect="909,305,955,359"
	scale="1"
	[/animation]

	[animation]
	id="ipad_down"
	duration="1"
	frame_info="0,1,1,2,936,356,46,28"
	frames="1"
	image="compiled-2.png"
	rect="936,355,982,385"
	scale="1"
	[/animation]

	[animation]
	id="ipad_down_pressed"
	duration="1"
	frame_info="0,1,1,2,890,356,46,28"
	frames="1"
	image="compiled-2.png"
	rect="890,355,936,385"
	scale="1"
	[/animation]

	[animation]
	id="ipad_left"
	duration="1"
	frame_info="7,9,8,8,0,333,81,127"
	frames="1"
	image="compiled-0.png"
	rect="-7,324,88,467"
	scale="1"
	[/animation]

	[animation]
	id="ipad_left_pressed"
	duration="1"
	frame_info="7,10,8,7,243,333,81,127"
	frames="1"
	image="compiled-0.png"
	rect="236,323,331,466"
	scale="1s"
	[/animation]

	[animation]
	id="ipad_right"
	duration="1"
	frame_info="8,9,7,8,162,333,81,127"
	frames="1"
	image="compiled-0.png"
	rect="154,324,249,467"
	scale="1"
	[/animation]

	[animation]
	id="ipad_right_pressed"
	duration="1"
	frame_info="8,10,7,7,81,333,81,127"
	frames="1"
	image="compiled-0.png"
	rect="73,323,168,466"
	scale="1"
	[/animation]

[/gui]

