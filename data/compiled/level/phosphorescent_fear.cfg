[level]
air_resistance="20"
auto_move_camera="0,0"
background="cave"
background_offset="0,0"
dimensions="0,0,799,599"
id="phosphorescent_fear.cfg"
music=""
num_compiled_tiles="754"
opaque_rects="-64,448,831,607:-32,-32,63,415:736,32,831,415:"
preloads=""
segment_height="0"
segment_width="0"
title=""
version="1.0.3"
water_resistance="100"
xscale="100"
yscale="100"
	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-28"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="103"
	y="0"
	y_speed="103"
	zorder="-14"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-10"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="-64"
	x_speed="100"
	y="-64"
	y_speed="100"
	zorder="-8"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="-64"
	x_speed="100"
	y="-64"
	y_speed="100"
	zorder="-5"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-3"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="0"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="20"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="30"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="49"
	[/tile_map]

	[tile_map]
	tiles=""
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="100"
	[/tile_map]

	[compiled_tiles]
	tiles=",1Lp,1Oi,1Oi,1Lu,
,1OO,1Nr,1Nr,1OT,
,1NX,1NS,1NS,1Nc,

1Lp,1Oi,1Lu,
1NX,1NS,1Nc,"
	x="544"
	y="288"
	zorder="-14"
	[/compiled_tiles]

	[compiled_tiles]
	tiles=",,,,,,,,,,,,,,,,,,,,,,,1Bk,1Bf,
,,,,,,,,,,,,,,,,,,,,,,,1Be,,,,008,
,,,,,,,,,,,,,,,,,,,,,,,1Be,,0Su,07W,
,,,,,,,,,,,,,,,,,,0Cm,0Cu,0Su,,,0T8,07W,0T0,07e,
,,,,,,,,,,,,,,,,,,0D0,0D8,0T0,07G,07W,0TG,07e,0Em,0Eu,
,,,,,,,,,,,,,,,,,0Su,05G,05O,0b8,07O,07e,0Em,0Eu,0F0,0F8,
,,,,,,,,0Cm,0Cu,0K0,0K8,0JG,0JO,0K0,0K8,07W,0T0,05W,05e,0bG,0be,0bm,0F0,0F8,0bO,0OW,
,,,,0T0,,,,0D0,0D8,0KG,0KO,0JW,0Je,0KG,0KO,07e,0Em,0Eu,0Te,0Tm,0Tu,0U0,0ae,0am,0bW,0Ou,
,,,,,06W,06e,,0Se,0Sm,0KW,0Ke,0Jm,0Ju,0KW,0Ke,000,0F0,0F8,0U8,0UG,0UO,0UW,0au,0b0,000,0Q0,
,,,,,0EO,06W,06e,01O,01W,01e,0Ve,0Vm,0Vu,0W0,0Ve,0Vm,0Vu,0W0,0Ue,0Um,0Uu,0V0,0a8,0aG,0FG,0FO,
,,,,,,0EG,0EO,01m,01u,020,0W8,0WG,0WO,0WW,0W8,0WG,0WO,0WW,0V8,0VG,0VO,0VW,0aO,0aW,0FW,0Fe,
,,,,,,,0Ee,028,02G,02O,0We,0Wm,,0X0,0We,0Wm,0Wu,0X0,0ae,0am,0a8,0aG,0a8,0aG,000,
,,,,,,,0Xm,0Xu,0Y0,000,0X8,,,,0X8,0XG,0XO,0XW,0au,0b0,0aO,0aW,0aO,0aW,0OW,
,,,,,,0Y8,0YG,0YO,0YW,,,,,,0aG,0bO,0bu,0c0,0bu,0c0,0bu,0c0,0bu,0c0,
,,,07e,,0Eu,0Ye,0Ym,0Yu,,,,,,,,,02W,02e,02m,0IW,0Ie,0Hm,0Hu,
,,,000,0F0,0F8,0Z8,0ZG,
,,,0Ze,0Zm,0bO,0be,
,,000,0Zu,0a0,"
	x="-96"
	y="-64"
	zorder="-8"
	[/compiled_tiles]

	[compiled_tiles]
	tiles=",11e,13H,13K,11P,,,,,,,,,,,,,,,,,,,,,,,11e,165,11P,
,15!,13N,13Q,15s,,,,,,,,,,,,,,,,,,,,,,,15!,14t,14w,
,14e,14h,159,15C,15F,,,,,,,,,,,,,,,,,,,,,0!v,0!y,150,153,
,14n,14q,15I,15L,15O,,,,,,,,,,,,,,,,,,,,15y,15!,10l,10o,15s,
,14e,14h,159,15C,15F,,,,,,,,,,,,,,,,,,,,15y,15!,10r,10u,15s,
,14n,14q,15I,15L,15O,,,,,,,,,,,,,,,,,,,,14b,14e,14h,159,15C,
,14M,14P,14t,14w,14z,,,,,,,,,,,,,,,,,,,,14k,14n,14q,15I,15L,
,14V,14Y,150,153,156,,,,,,,,,,,,,,,,,,,,14b,14e,14h,159,15C,
,14M,14P,15j,15m,15p,,,,,,,,,,,,,,,,,,,,14k,14n,14q,15I,15L,
,14V,14Y,0.7,0.A,0.D,,,,,,,,,,,,,,,,,,,,14J,14M,14P,14t,14w,
,14M,14P,0.G,0.J,0.M,12U,12X,,,,11V,11Y,15R,11J,11M,,,,,,,,,,14S,14V,14Y,150,153,
,14V,14Y,0.P,0.S,0.V,0z.,12a,,,,11b,11e,15U,11P,11S,,,,,,,,,,0!v,0!y,0z.,159,15C,
,15!,0z.,0z.,10x,10.,0!!,102,11V,11Y,15R,0!v,0!y,15X,15s,15v,,,,,,,,,15y,15!,10l,10o,15I,15L,
,15!,12d,12g,111,114,12L,,11b,11e,15U,10l,10o,0.7,0.A,0.D,168,,,,,,,,0!v,0!y,10r,10u,159,15C,
,11w,12j,12m,16E,12O,12R,,0!v,0!y,15X,10r,10u,0.G,0.J,0.M,16B,10N,13l,13o,13T,13W,15R,10T,10l,10o,0z.,0z.,15I,15L,
,,,12s,16H,,,10T,10l,10o,0z.,0z.,0z.,0.P,0.S,0.V,0z.,10Q,13r,13u,13Z,13c,15U,10W,10r,10u,0z.,0z.,159,15C,
,,,,,168,10T,10W,10r,10u,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,13x,13.,13f,13i,15X,0z.,0z.,0z.,0z.,0z.,15I,15L,
,,,144,10T,16B,10W,10l,10o,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,14t,14w,
,11e,147,14A,10W,10l,10o,10r,10u,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,150,153,
,15!,14D,14G,0z.,10r,10u,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,14t,14w,
,15!,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,0z.,150,153,
,15!,12d,12g,12v,12y,12v,12y,12v,12y,12d,12g,12v,12y,12d,12g,12d,12g,12d,12g,12v,12y,12d,12g,12v,12y,12v,12y,15a,15s,
,11w,12j,12m,12!,132,12!,132,12!,132,12j,12m,12!,132,12j,12m,12j,12m,12j,12m,12!,132,12j,12m,12!,132,12!,132,15d,11h,"
	x="-96"
	y="-64"
	zorder="-5"
	[/compiled_tiles]

	[compiled_tiles]
	tiles=",,,,0.1,,,,,,,,,,,,,,,,,,,,,0.1,
,0.1,

,,,,,,,,,,,,,,,,,,,,,,,,0.1,0.1,
,,,,,,,,0.1,0.1,0.1,,,,0.1,,,,,,,,,,0.1,0.1,
,,,,,,,,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,,,,,,0.1,0.1,0.1,0.1,0.1,
,,,,,,,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,
,,,,,,,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,
,,0.1,,,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,
,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,"
	x="-32"
	y="288"
	zorder="20"
	[/compiled_tiles]

	[character]
	_addr="0x1e1f6600"
	current_frame="normal"
	custom="yes"
	face_right="yes"
	is_human="true"
	label="_475e256a"
	time_in_frame="0"
	type="frogatto_playable"
	velocity_x="0"
	velocity_y="0"
	x="64"
	y="190"
		[editor_info]
		category="player"
		[/editor_info]

		[objects_destroyed]
		level="phosphorescent_fear.cfg"
		objects=""
		[/objects_destroyed]

	[/character]

	[character]
	_addr="0x1e1a1800"
	current_frame="normal"
	custom="yes"
	face_right="yes"
	label="_51d3a4e7"
	on_process="[
		if(cycle % 10 = 2, [	#add new oil and remove old oil#
			set(vars.oil, filteredOil + [newOilDrop]), 
			add_object(newOilDrop), 
			set(newOilDrop.parent, self), 
			set(newOilDrop.velocity_y, 500+1d150), 
			set(newOilDrop.velocity_x, 25-1d50),
			[set(newOilDrop.red, sin(cycle/4+333)*4), set(newOilDrop.blue, sin(cycle/5+666)*4), set(newOilDrop.green, sin(cycle/6+999)*4), ]
				] where newOilDrop = object('oil-drop', self.midpoint_x, self.midpoint_y, self.facing),
			[set(vars.oil, filteredOil), map(filter(vars.oil, 'oil', not oil in filteredOil), 'clutter', 
				[remove_object(clutter.outline), remove_object(clutter)])])
			where filteredOil = filter(vars.oil, 'dirtyOil', dirtyOil.x > level.dimensions[0] and dirtyOil.x < level.dimensions[2] and dirtyOil.y < level.dimensions[3]),
		
		map(vars.oil, 'drop', [	#Figure out where each drop of oil is going based on wall proximity and droplet proximity.#
			set(drop.x, dropMot[0]),
			set(drop.y, dropMot[1]),
			set(drop.outline.x, dropMot[0]),
			set(drop.outline.y, dropMot[1]),
			set(drop.velocity_x, dropMot[2]),
			set(drop.velocity_y, dropMot[3]),
			]
			where dropMot =
				[drop.x, drop.y] + if(sum(solidities) != 5, 
				[if((solidities[1] and (not solidities[3]) and dvx > 0) or (solidities[3] and (not solidities[1]) and dvx < 0), 0, dvx) 
					where dvx = ((drop.velocity_x+solidities[1]*(-wallRepulsion)+solidities[3]*wallRepulsion+gravity[0]+totalForce[0])*airResistance)/10000,
				 if((solidities[2] and (not solidities[4]) and dvy > 0) or (solidities[4] and (not solidities[2]) and dvy < 0), 0, dvy) 
					where dvy = ((drop.velocity_y+solidities[2]*(-wallRepulsion)+solidities[4]*wallRepulsion+gravity[1]+totalForce[1])*airResistance)/10000],
				[-drop.velocity_x/2, -drop.velocity_y/2])
			
			where solidities = map([[0,0],[radius, 0],[0, radius],[-radius, 0],[0, -radius]] where radius = 40, 
				'dists', solid(level, drop.midpoint_x+dists[0], drop.midpoint_y+dists[1]) 
				)
			where totalForce = [sum(map(forces, 'force', force[0])), sum(map(forces, 'force', force[1]))]
			where forces = map(filter(vars.oil, 'eachOilDrop', eachOilDrop != drop), 'oilDrop', [
				((repulseStrength*1000*orbit_obj(0,0,ang+180,dist)[0])/(dist*dist*dist))/1, 
				((repulseStrength*1000*orbit_obj(0,0,ang+180,dist)[1])/(dist*dist*dist))/2] 
					where dist = distance(drop, oilDrop)
					where ang = angle_to(drop, oilDrop))
		)] where gravity = [0,80]
		where wallRepulsion = 100
		where airResistance = 9400 #IT'S OVER 9000!!# 
		where repulsionDist = 0
		where repulseStrength = 100"
	time_in_frame="0"
	type="target"
	velocity_x="0"
	velocity_y="0"
	x="629"
	y="5"
		[vars]
		on="1"
		[/vars]

		[editor_info]
		category="controllers"
		[/editor_info]

	[/character]

	[serialized_objects]
	[/serialized_objects]

[/level]

