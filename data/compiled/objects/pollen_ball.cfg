[prototype]
affected_by_currents="yes"
always_active="yes"
has_feet="no"
id="pollen_ball"
object_level_collisions="yes"
on_collide="die()"
on_collide_level="die()"
on_collide_object_attack="[
	      if(collide_with.vars.team != vars.team and collide_with_area = 'body', die())]"
on_collide_object_body="if(collide_with.vars.team != vars.team and collide_with_area = 'attack', [debug('hit'),get_hit_by(collide_with),die()])"
on_create="add_particles('particles')"
on_die="[spawn('pollen_impact_particle',midpoint_x,midpoint_y,0)]"
on_end_anim="die()"
on_enter_water="[add_wave(midpoint_x, y2, 500, velocity_y, 10*velocity_y, 100, 100),
	                 add_wave(midpoint_x, y2, -500, velocity_y, 10*velocity_y, 100, 100), die()]"
on_timer="set(rotate, cycle*10)"
solid_dimensions="enemy,player,common"
timer_frequency="4"
zorder="10"
	[properties]
	get_hit_by="def(collide_with) if(not (me in collide_with.tmp.already_hit), [
				set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]),
				set(me.hitpoints, me.hitpoints - collide_with.vars.damage), if(me.hurt_velocity_y, set(me.velocity_y,me.hurt_velocity_y)), if(me.hurt_velocity_x, set(me.velocity_x,me.hurt_velocity_x * collide_with.facing))])"
	hurt_velocity_x="0"
	hurt_velocity_y="0"
	[/properties]

	[animation]
	accel_y="20"
	attack_area="all"
	body_area="all"
	duration="250"
	frame_info="1,1,1,1,998,835,9,9"
	frames="1"
	id="normal"
	image="compiled-0.png"
	rect="997,834,1007,844"
	velocity_x="0"
	velocity_y="-500"
	[/animation]

	[vars]
	damage="1"
	team="'evil'"
	[/vars]

	[particle_system]
	colors="f9f9dbff,ffc20eff,ffc20e55,ff7e0055,ae4a2855"
	generation_rate_millis="250"
	id="particles"
	pos_x="5"
	pos_y="5"
	time_to_live="12"
	time_to_live_rand="24"
	type="point"
	velocity_x="-1500"
	velocity_x_rand="3000"
	velocity_y="-1500"
	velocity_y_rand="3000"
	[/particle_system]

[/prototype]

