[object_type]
id="current_generator"
ignore_collide="true"
on_create="[set(alpha,0),
		set(current_generator, rect_current(zone_x1, zone_y1 ,abs(zone_x1 - zone_x2) ,abs(zone_y1 - zone_y2) , current_vel_x, current_vel_y, strength)),
		add_particles('particles'),
		fire_event('setup_particles')]"
on_end_anim="animation('normal')"
on_setup_particles="[
		set(particles.velocity_x, current_vel_x*10),
		set(particles.velocity_y, current_vel_y*10),
		set(particles.min_x, min(zone_x1, zone_x2) - x),
		set(particles.max_x, max(zone_x1, zone_x2) - x),
		set(particles.min_y, min(zone_y1, zone_y2) - y),
		set(particles.max_y, max(zone_y1, zone_y2) - y)
		]"
zorder="50"
	[editor_info]
	category="controllers"
		[var]
		name="zone_x1"
		type="x"
		value="x"
		[/var]

		[var]
		name="zone_x2"
		type="x"
		value="x+200"
		[/var]

		[var]
		name="zone_y1"
		type="y"
		value="y"
		[/var]

		[var]
		name="zone_y2"
		type="y"
		value="y+200"
		[/var]

		[var]
		name="strength"
		value="1000"
		[/var]

		[var]
		name="current_vel_x"
		value="0"
		[/var]

		[var]
		name="current_vel_y"
		value="-200"
		[/var]

	[/editor_info]

	[animation]
	duration="1000"
	frames="1"
	id="normal"
	image="compiled-2.png"
	rect="659,576,686,603"
	[/animation]

	[particle_system]
	id="particles"
	spawn_rate="3000"
	time_to_live="50"
	type="simple"
		[animation]
		accel_y="-1"
		duration="10"
		frames="5"
		id="sparkle"
		image="compiled-0.png"
		rect="243,55,246,58"
		scale="2"
		[/animation]

	[/particle_system]

[/object_type]

