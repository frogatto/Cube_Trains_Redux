[object_type]
id="partial_max_heart_object"
on_acquired="[animation('touched'),
		music_onetime('specialitem.ogg'),
		spawn('color_flash',x,y,0,[set_value('color_r',237),set('color_g',28),set('color_b',36)]),
		map([0,0,0,0,0,0,0,0,0,0],spawn('heart_sparkle',midpoint_x,midpoint_y,0)),
		switch(level.player.num_partial_hearts,
			0,
				[set(level.player.driver.num_partial_hearts, level.player.driver.num_partial_hearts + 1), speech_dialog([~You've found part of a heart capsule.~,~Collect another three to increase~,~ your maximum HP by one!~])],
			1,
				[set(level.player.driver.num_partial_hearts, level.player.driver.num_partial_hearts + 1), speech_dialog([~You've found part of a heart capsule.~,~Collect another two to increase~,~ your maximum HP by one!~])],
			2,
				[set(level.player.driver.num_partial_hearts, level.player.driver.num_partial_hearts + 1), speech_dialog([~You've found part of a heart capsule.~,~Collect another one to increase~,~ your maximum HP by one!~])],
			3,
				[set(level.player.driver.num_partial_hearts, 0),
				set(level.player.driver.max_hitpoints, level.player.driver.max_hitpoints + 1), set(level.player.driver, 'hitpoints', level.player.driver.hitpoints + 1), 
				speech_dialog([~You've collected enough parts to~,~make a whole new heart capsule!~,~Your maximum HP has increased by one!~])])]"
on_collide_object_body="if(collide_with.player,fire_event('acquired'))"
on_end_normal_anim="animation('normal')"
on_end_touched_anim="die()"
respawns="no"
	[animation]
	body_area="all"
	duration="4"
	frames="4"
	id="normal"
	image="compiled-2.png"
	rect="720,181,741,216"
	reverse="yes"
	[/animation]

	[animation]
	duration="8"
	frames="1"
	id="touched"
	image="compiled-1.png"
	rect="1000,925,1021,960"
	reverse="yes"
	[/animation]

[/object_type]

