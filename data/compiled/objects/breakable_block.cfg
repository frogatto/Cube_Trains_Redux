[object_type]
id="breakable_block"
on_collide="set(velocity_x, -(velocity_x*70)/100)"
on_collide_feet="[set(velocity_x, (velocity_x*70)/100), set(velocity_y, if(abs(velocity_y) > 50, -velocity_y/2, 0))]"
on_collide_head="set(velocity_y, -velocity_y)"
on_collide_object_body="if(collide_with_area = 'attack',
	if(not (me in collide_with.tmp.already_hit), [set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]), 
		
	if(animation != 'cracked', animation('cracked'), die())  ]))"
on_die="[score(level,5),sound('BlockBreak.ogg'), map([0] * 10, spawn('breakable_block_particle', x + 1d10, y + 1d10, facing))]"
on_enter_water="[
	add_wave(midpoint_x, y2, -2000, 5*velocity_y/2, 30*velocity_y, 300, 300),
	add_wave(midpoint_x, y2, 2000, 5*velocity_y/2, 30*velocity_y, 300, 300),
	add_wave(midpoint_x, y2, -1000, 3*velocity_y/2, 20*velocity_y, 200, 200),
	add_wave(midpoint_x, y2, 1000, 3*velocity_y/2, 20*velocity_y, 200, 200),
	add_wave(midpoint_x, y2, -500, 2*velocity_y/2, 10*velocity_y, 100, 100),
	add_wave(midpoint_x, y2, 500, 2*velocity_y/2, 10*velocity_y, 100, 100)
	]"
on_process="[set(velocity_x, (((velocity_x + (slope_standing_on / 2)) * 997) / 1000) - (underwater * (velocity_x * 2) / 10)),
		set(velocity_y, ((velocity_y * 997) / 1000) + underwater * (((velocity_y * 9) / 10) - velocity_y))]"
solid_area="0,0,15,15"
zorder="-1"
	[editor_info]
	category="props"
	[/editor_info]

	[animation]
	body_area="all"
	duration="100"
	frames="1"
	id="normal"
	image="compiled-0.png"
	rect="947,26,962,41"
	[/animation]

	[animation]
	body_area="all"
	duration="100"
	frames="1"
	id="cracked"
	image="compiled-1.png"
	rect="368,208,383,223"
	[/animation]

[/object_type]

