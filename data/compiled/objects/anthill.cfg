[object_type]
id="anthill"
on_child_spawned="[
	  remove_object(child),
	  set(attached_objects, [child]),
	  set(tmp.spawning, child)
	]"
on_end_normal_anim="[
	  set(vars.spawned_objects, filter(vars.spawned_objects, 'ant', ant.hitpoints > 0 and ant.x > context.vars.zone_x1 and ant.x2 < context.vars.zone_x2)),
	  animation('normal'),
	  if(size(vars.spawned_objects) < vars.max_objects,
	     set(vars.generation_counter, vars.generation_counter+1),
		 set(vars.generation_counter, 0)),
	  if(vars.generation_counter >= 5 and tmp.spawning,
	     [set(attached_objects, []), set(tmp.spawning, null()),
		  set(tmp.spawning.velocity_y, -400),
		  set(vars.spawned_objects, vars.spawned_objects + [tmp.spawning]),
		  add_object(tmp.spawning)]),
	  if(vars.generation_counter >= vars.generation_time,
	     [spawn(if(vars.spawn_type, vars.spawn_type, 'ant_red'), midpoint_x, midpoint_y, facing),
		  set(vars.generation_counter, 0)])
	  ]"
	[vars]
	generation_counter="0"
	generation_time="20"
	max_objects="3"
	spawn_type="'ant_red'"
	spawned_objects="[]"
	zone_x1="0"
	zone_x2="0"
	[/vars]

	[tmp]
	spawning="null()"
	[/tmp]

	[animation]
	duration="10"
	frame_info="0,20,3,1,306,778,36,12"
	frames="1"
	id="normal"
	image="compiled-2.png"
	rect="306,758,344,790"
	[/animation]

[/object_type]

