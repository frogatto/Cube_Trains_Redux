[prototype]
	[vars]
		team="'evil'"
		points_value="5"
		turns_at_cliffs=1
		damage=1
	[/vars]

	[consts]
	thrown_damage=4
	normal_damage=1
	[/consts]

	prototype=hittable

	springiness=100
	friction=1000
	traction=1000
	timer_frequency=5
	hitpoints=5
	solid_area=5,10,20,25
	solid_dimensions=enemy,common
	tags=swallowable
	
	on_create="animation('stand')"
	
	on_die="[score(level,points_value), spawn_item(self), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_collide="if(not (animation in ['hurt']), [set('facing', -facing),animation('turn'),set('velocity_x',0)])"
	on_collide_feet="animation('walk')"
	on_jumped_on="[if(jumped_on_by.mass >= 1000, die(), animation('spring'))]"
	on_end_anim="animation('walk')"
	on_enter_anim="set(tmp, 'already_hit', [])"

	on_enter_thrown_anim="[set(vars.damage, consts.thrown_damage)]"
	on_leave_thrown_anim="[set(solid_dimensions_in, ['enemy', 'common']), set(vars.team, 'evil')]"
	on_change_solid_dimensions_fail="[die()]"
	on_change_animation_failure="[die()]"
	
	on_process="set('rotate', slope_standing_on)"
	on_process_walk="if(not is_standing, animation('stand'))"
	on_process_stand="if(is_standing, animation('walk'))"
	
	on_timer="if(turns_at_cliffs and is_standing and animation = 'walk' and distance_to_cliff < 30,[set('facing', -facing),animation('turn')],null())"
	on_end_turn_anim="animation('walk')"
	
	on_collide_object_thrown="
	[if(collide_with_area = 'body' and collide_with.vars.team != vars.team,
		 [die()])]"
	
	on_end_hurt_anim="animation('walk')"
	
	on_surface_damage="die()"
	feet_width=4
	
		[animation]
		id=stand
		attack_area=15,18,26,26
		[/animation]

		[animation]
		id=thrown
		thrown_area=0,0,31,36
		attack_area=0,0,31,36
		duration=10000
		[/animation]

		[animation]
		id=walk
		attack_area=15,18,26,26
		[/animation]

		[animation]
		id=turn
		attack_area=0,18,26,26
		[/animation]


[/prototype]
