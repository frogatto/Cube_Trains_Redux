[prototype]
  traction_in_air=1000
  friction=0
  object_level_collisions=yes
  always_active=yes

  [editor_info]
    category=cellular
  [/editor_info]

  [vars]
    team="'bullets'"
    velocity=1500
    parent=0
    damage=1
    hits=10
  [/vars]

  timer_frequency=2

  on_spawned="[
    set(vars.parent,spawner),
  ]"

  on_timer="[
    if(vars.parent.vars.energy > vars.parent.vars.max_energy/5, [
      send_to_coordinates(me,vars.parent.mouse_x,vars.parent.mouse_y,velocity),
      add(vars.parent.vars.energy, -1)
    ],[
      die()
    ])
  ]"
  on_collide_object_body="[
    if(collide_with.team!=team and collide_with.team!=vars.parent.vars.team and collide_with.vars.team!='neutral',[
      if(collide_with.hitpoints <=vars.damage, set(collide_with.solid_dimensions_in, none)),
      add(collide_with.hitpoints, -vars.damage),
      if(collide_with!=level.player,spawn('energy_pickup',midpoint_x,midpoint_y,0,[set(trackx,vars.parent.midpoint_x), set(tracky,vars.parent.midpoint_y), set(velocity, 500)])),
      if(hits=1, die()),
      add(hits,-1)
    ])
  ]"

  on_die="[
    spawn('pollen_impact_particle',midpoint_x,midpoint_y,0)
  ]"

[/prototype]
