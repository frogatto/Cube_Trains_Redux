[prototype]
zorder=-5

	[properties]
	already_owned="find(level.player.vars.items_owned, 'item', item = type)"
	[/properties]

	on_create="[if(already_owned, die())]"

	on_interact="[fire_event(level.player, 'start_interact')]"
	on_talk="[set(level.player.time_in_animation_delta, 0),
	         if(level.player.vars.coins < consts.price,
	            [
	             speech_dialog(self, consts.description + [~The price is ~ + consts.price + ~ coins.~, ~You don't have enough money.~]),
				],
				[
				 speech_dialog(self, consts.description + [~The price is ~ + consts.price + ~ coins.~]),
				 speech_dialog(self, [~Do you want to buy the ~ + consts.name + ~?~,
				  'Yes', [fire_event('bought'), die(), set(level.player.vars.items_owned, level.player.vars.items_owned + [type]), set(level.player.vars.coins, level.player.vars.coins - consts.price)],
				  'No', []])
				]),
			    set(level.player.time_in_animation_delta, 1)]"

	on_end_normal_anim="animation('normal')"
	[animation]
	id=normal
	interact_area=all
	[/animation]

[/prototype]
