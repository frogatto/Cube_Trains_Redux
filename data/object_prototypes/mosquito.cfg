[prototype]
	[vars]
		team="'evil'"
		points_value="5"
		damage=1
	[/vars]
	hitpoints=2
	springiness=100
	friction=1000
	traction=1000
	timer_frequency=2
	traction_in_air=1000

	solid_area=2,12,30,28
	on_create="animation('fly')"
	
	on_die="[score(points_value), spawn_item(self), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_collide="[set('facing', -facing),animation('turn'),set('velocity_x',0)]"
	on_jumped_on="[debug('jumped on ', jumped_on_by.mass), if(jumped_on_by.mass >= 1000, die(), animation('spring'))]"
	on_end_anim="animation('fly')"
	on_enter_anim="set(tmp, 'already_hit', [])"
	
	
	on_timer="if(solid(level, front + facing*50, y, 1, y2 - y) or (facing < 0 and x < vars.x_bound) or (facing > 0 and x2 > vars.x2_bound),
	[facing(-facing), animation('turn')])"

	on_end_turn_anim="animation('fly')"
	
	
		on_collide_object_body=" if(collide_with.vars.team != vars.team and collide_with_area = 'attack',
			if(not (me in collide_with.tmp.already_hit), [set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]),
		
				set('hitpoints', hitpoints - collide_with.vars.damage), debug(collide_with.vars.damage), animation('hurt'), set('green', 100), set('blue', 100), set('velocity_x',600 * collide_with.facing),debug(~mosquito hp: ~ + (hitpoints))]))"
	
	on_hurtflicker="if(green = 100,[set('green', 255), set('blue', 255)],[set('green', 100), set('blue', 100)])"
	on_leave_hurt_anim="[set('green', 255), set('blue', 255)]"
	on_end_hurt_anim="animation('fly')"
	
	
	
	on_surface_damage="die()"
	feet_width=4
	
		[animation]
		id=fly
		attack_area=15,18,26,26
		accel_x=10
		[/animation]

		[animation]
		id=turn
		attack_area=0,18,26,26
		#accel_x=50
		[/animation]


[/prototype]
