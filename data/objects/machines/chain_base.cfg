[object_type]
id=chain_base

	[editor_info]
	category=machines
	[/editor_info]


on_create="[
spawn('spiked_ball', x + 16, y + 16, 1, [set_var('radius', 210), set_var('speed', 5), set_var('parent', label)]),

map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20], 'radius', spawn('chain_link', x + 16, y + 16, 1, [set_var('radius', radius*10), set_var('speed', 5), set_var('parent', label),
  if((radius%2) = 1, [animation('normal2'), set(z, z - 1)], set(z, z - 2))
]))]"

on_child_spawned="[
	if(child.type = 'spiked_ball', set(vars.ball, child),
	  set(child.activation_area, vars.ball.activation_area))
]"

	[vars]
	ball="null()"
	[/vars]
	[animation]
	id=normal
	image=props/spikedball.png
	rect=25,2,41,18
	collide=0,0,16,16
	duration=10000000
	[/animation]
[/object_type]
