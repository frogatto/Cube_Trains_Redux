
	[object_type]
	id=milgram_block_launcher
	prototype=stationary_vulnerable
	hitpoints=4
	zorder=0
	
	[editor_info]
	category=machines
		[var]
		name=loading_time
		value="6"
		[/var]
	[/editor_info]

	[vars]
		load=0
		team="'evil'"
		points_value="50"
		damage=1
	[/vars]
	
	
	on_end_anim="if(animation = 'normal',
	                   if(vars.load >= vars.loading_time,
					     [animation('prepfire'), set_var('load', 0)],
						 [animation('normal'), set_var('load', vars.load + 1)]),)"
	on_end_prepfire_anim="animation('fire')"
	on_end_fire_anim="animation('normal')"
					      
	on_shoot="[spawn('milgram_block', midpoint_x+ facing*50, midpoint_y -50, facing, [set_value('velocity_x',800*facing),set_value('velocity_y',-800)]),sound('FlowerShot.ogg')]"

	solid_area=10,16,38,50

		[base:animation]
		image=enemies/milgram-block-launcher.png
		pad=3
		accel_y=80
		body_area=all
		[/animation]
		
		[animation]
		id=normal
		rect=1,1,49,53
		frames=3
		reverse=yes
		duration=4
		[/animation]
		
		#the spring animation is a duplicate of the normal animation,
		#unless/until we have a proper one.
		[animation]
		id=spring
		rect=1,1,49,53
		frames=3
		reverse=yes
		duration=4
		[/animation]


		[animation]
		id=prepfire
		rect=1,58,49,110
		frames=4
		duration=5
		[/animation]


		[animation]
		id=fire
		rect=1,115,49,167
		frames=4
		duration=5
		events="1:shoot"
		[/animation]

		[animation]
		id=hurt
		rect=1,58,49,110
		[/animation]

	[/object_type]
