[object_type]
id=wheel_big_wooden


on_process="set(rotate, rotate + 1)"

on_create="[
  if(vars.other_wheel_position != null(),
    [spawn('wheel_big_wooden', midpoint_x, vars.other_wheel_position, facing),
	 spawn('vertical_rope', x+10, min(midpoint_y, vars.other_wheel_position), facing),
	 spawn('vertical_rope', x+img_w-10, min(midpoint_y, vars.other_wheel_position), facing)
	 ]),
  spawn('wheel_big_wooden_shadow',midpoint_x-10, midpoint_y-4,facing, [set('zorder', zorder-2)]),
  set(vars.rope_len, abs(midpoint_y - vars.other_wheel_position))
  ]"

on_child_spawned="[
  if(child.type = 'wheel_big_wooden_shadow', set(child.zorder, parent.zorder-2)),
  if(child.type = 'vertical_rope',
		[set(child.zorder, parent.zorder-1), set(vars.ropes, vars.ropes + [child])])]"

on_draw="map(vars.ropes, 'rope', rope.set_pos_len(rotate * if(index, -1, 1), vars.rope_len))"



	[editor_info]
	category=props
		[var]
		name=other_wheel_position
		type=y
		value="midpoint_y"
		[/var]

	[/editor_info]

	[vars]
	other_wheel_position="null()"
	ropes="[]"
	rope_len="0"
	[/vars]

	[properties]
	left_rope="vars.ropes[0]"
	right_rope="vars.ropes[1]"
	[/properties]

	[animation]
	image=props/wooden-wheel.png
	id=normal
	x=104
	y=4
	w=80
	h=80
	[/animation]
[/object_type]
