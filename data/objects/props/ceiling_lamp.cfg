[object_type]
	id=ceiling_lamp
	zorder=-2
	on_end_anim="animation('normal')"
	
	[editor_info]
	category=furniture
		help="An incandescent ceiling light attached to an electrical grid of questionable quality."
		[var]
			name=broken
			type=boolean
			value=0
		[/var]
	[/editor_info]
	
	always_active = "yes"
	
	on_process = "if(vars.broken = 1, animation('broken'), set(lights, circle_light(me, wave(cycle*4)/200+250)))"

	[base:animation]
	image=props/ceiling-lamp.png
	pad=0		
	[/animation]

	[animation]
	id=normal
	duplicates=6
	rect=0,0,31,63
	frames=1
	duration=40
	[/animation]
	
	[animation]
	id=normal
	rect=0,0,31,63
	frames=3
	reverse=yes
	duration=2
	[/animation]
	
	[animation]
	id=broken
	duplicates=6
	rect=96,0,127,63
	frames=1
	duration=40
	[/animation]
[/object_type]
