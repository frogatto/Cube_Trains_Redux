[object_type]
	id=breakable_block
	on_die="[score(level,5),sound('BlockBreak.ogg')]"

	on_collide_object_body=" if(collide_with_area = 'attack',
	if(not (me in collide_with.tmp.already_hit), [set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]), 
		
	if(animation != 'cracked', animation('cracked'), [map([0] * 10, spawn('breakable_block_particle', x + 1d10, y + 1d10, facing)), die()])  ]))"
	on_process="set(velocity_x, (((velocity_x + (slope_standing_on / 2)) * 997) / 1000) - (underwater * (velocity_x * 2) / 10))"
	on_collide="set('velocity_x', -(velocity_x*70)/100)"
	on_collide_head="set('velocity_y', -velocity_y)"
	on_collide_feet="[set('velocity_x', (velocity_x*70)/100), set('velocity_y', -velocity_y/2)]"

	zorder=10
	solid_area=0,0,15,15

		[base:animation]
		image=props/blocks.png
		body_area=all	
		accel_y=70	
		[/animation]

		[animation]
		id=normal
		rect=0,0,15,15
		frames=1
		duration=100
		[/animation]
		[animation]
		id=cracked
		rect=16,0,31,15
		frames=1
		duration=100
		[/animation]
[/object_type]
