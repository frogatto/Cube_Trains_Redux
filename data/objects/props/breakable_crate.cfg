
	[object_type]
	id=breakable_crate
	on_die="[score(5),sound('BlockBreak.ogg')]"

	on_collide_object_body=" if(collide_with_area = 'attack',
		if(not (me in collide_with.tmp.already_hit), [set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]), 
		
			if(animation != 'cracked', animation('cracked'), [map([0,0,0,0,0,0,0,0,0,0], spawn('breakable_crate_particle', x + 1d10, y + 1d10 -100, facing)), die()])  ]))"


	zorder=10
	solid_area=0,0,15,15

		[base:animation]
		image=props/blocks.png
		accel_y=80
		body_area=all		
		[/animation]

		[animation]
		id=normal
		rect=32,0,47,15
		frames=1
		duration=100
		[/animation]
		[animation]
		id=cracked
		rect=48,0,63,15
		frames=1
		duration=100
		[/animation]
	[/object_type]
