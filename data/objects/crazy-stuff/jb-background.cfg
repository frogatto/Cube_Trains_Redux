[object_type]
	id="jb-background"
	is_human=true
	zorder=60

	[vars]
		song_title = ~error~
		song_title_x = 318
		song_title_y = 360
		song_display = null()
	[/vars]
	
	
	functions="
		def song_time(title) ~0:00~;
	"

	on_create="[set(x,0), set(y,0), set(alpha, 255),
				set(self.vars.song_title, song),
				fire_event(self, 'song_title_reset'),
				set(self.vars.song_start, time()),
				schedule(2, fire_event(self, 'play_song')),
				] where song = ~~"
				
	on_next_song="[
		remove_object(self.vars.song_display),
		set(self.vars.song_title, song),
		if(song=self.vars.song_title, 
			fire_event(self, 'next_song'), 
			schedule(20, fire_event(self, 'song_title_reset')))
		] where song = [~AncientCave~, ~IntegerRobotBoss~, ~beach~, ~MilgramBossBattle~, ~DrumJazz~, ~MilgramChamber~, ~DumDuhDee~, ~MilgramSwagger~, ~DungeonBaroque~, ~neoBoss~, ~Dungeon~, ~NeoShop~, ~ElderChief~, ~NeoTown~, ~FrogattoChill~, ~PepUp~, ~frogattoHouse~, ~PointBreak~, ~FrogattoStage1~, ~RandomInteger~, ~FrogattoTitle~, ~SavedGame~, ~FrogBeachTown~, ~specialitem~, ~FrogForest~, ~TeaForTwo~, ~FrogForestVillage~, ~TheGrotto~, ~FrogTech~, ~TheWomb~, ~FrogUnderWater~, ~wind~, ~Gunslinger~, ~WorldMap~][1d34-1]"
		
	on_ctrl_jump = "[
		fire_event(self, 'next_song'),
		schedule(2, fire_event(self, 'play_song')),
		]"
		
	on_play_song = "music_onetime(self.vars.song_title + ~.ogg~)"
		
	on_child_spawned="if(child.type = 'text_controller' and child.txt = self.vars.song_title, set(self.vars.song_display, child))"
				
	on_song_title_reset="[
		spawn('text_controller', 
		self.vars.song_title_x, self.vars.song_title_y, 0, [
			set(txt, self.vars.song_title), 
			schedule(60, [
				set(text_alpha, 0),
					schedule(20, [
					set(text_alpha, 255),
						schedule(60, [
						set(text_alpha, 0),
							schedule(20, [
							set(text_alpha, 255),
							map([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
							'tk', [
									schedule(tk*5+120, [
									set(midpoint_y, self.vars.song_title_y + tk*2),
									spawn('text_controller', 
									self.vars.song_title_x, self.vars.song_title_y-40+tk*2, 0, [
										set(txt, song_time(self.vars.song_title)),
										schedule(if(tk=20, 180, 5), die()),
										]),
									]),
									schedule(500-tk*5, [
									set(midpoint_y, self.vars.song_title_y + tk*2),
									spawn('text_controller', 
									self.vars.song_title_x, self.vars.song_title_y-40+tk*2, 0, [
										set(txt, song_time(self.vars.song_title)),
										schedule(5, die()),
										]),
									]),
								]),
							]),
						]),
					]),
				]),
			]),
		]"



	[animation]
		id=normal
		image=jukebox/background.png
		rect=0,0,399,299
		frames=1
		duration=100000000
	[/animation]

[/object_type]