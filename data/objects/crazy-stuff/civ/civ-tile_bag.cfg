[object_type]
	id=civ-tile_bag
	hitpoints=2
	z=-10
	
	[editor_info]
		category=crazy-stuff
	[/editor_info]
	
	[consts]
		num_farm 	= 2
		num_mine 	= 2
		num_war 	= 2
		num_settle 	= 2
	[/consts]
	
	[properties]
	extract = "def() if(size(vars.pile) > 0, [vars.pile[index], [#debug('pile: ', map(vars.pile, 'pile', pile.type)), #set(vars.pile, vars.pile[0:index] + vars.pile[index+1:size(vars.pile)])]] where index = (1 d size(vars.pile)) - 1)"
	[/properties]
	
	on_create="[set(vars.pile, []
		+ map(range(consts.num_farm), object('civ-tile_farm', x, y, facing))
		+ map(range(consts.num_mine), object('civ-tile_mine', x, y, facing))
		+ map(range(consts.num_war), object('civ-tile_war', x, y, facing))
		+ map(range(consts.num_settle), object('civ-tile_settle', x, y, facing))
		),
		
		#debug(list[0:2] + list[3:6] where list = [0,1,2,3,4,5,6]),#
		#debug(vars.spawner),#
		]"

	on_done_create="
		map(range(size(evts)), 'evt_num', 
			schedule(evt_num*20, evts[evt_num])
			)
		where evts = map(range(vars.parent.consts.hand_size), fire_event('deal_p1'))
		"

	on_spawned="[debug('hi?'),
		set(vars.spawner, spawner),
		map(range(evts), 'evt_num', 
			schedule(evt_num*20, evts[evt_num])
			)
		where evts = map(range(spawner.consts.hand_size), fire_event('deal_p1')),
		]"
	
	on_one="debug('1')"
	on_two="debug('2')"
	on_pile="debug('vp', vars.pile)"
	
	
	on_deal_p1 = "[		
		debug(to_pop[0].type),
		to_pop[1]]where to_pop = extract()"
	
	on_end_anim="animation('normal')"
	
	[animation]
		id=normal
		image=experimental/civ-stuff.png
		x=79
		y=35
		w=74
		h=105
		pad=0
		frames=1
		duration=6431
	[/animation]
	
	
[/object_type]