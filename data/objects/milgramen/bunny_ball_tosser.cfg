[object_type]
id="bunny_ball_tosser"

hitpoints="5"
prototype="hittable"
on_start_level="[
	spawn('bunny_ball_tosser.cannonball_pile', midpoint_x + 64 * facing, midpoint_y + 36, facing),
	set(always_active, vars.always_active)
]"
on_child_spawned="add(vars.children, [child])"

on_end_stand_anim="[set(vars.charge_up, vars.charge_up+1), if(vars.charge_up >= vars.charge_time, set(animation, 'throw'), set(animation, 'stand'))]"
on_end_throw_anim="[set(vars.charge_up, 0), set(animation, 'stand')]"
solid_area=20,18,42,56
on_die="[map(vars.children, 'child', remove_object(child)), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"


on_launch_ball="spawn('thrown_metal_ball', midpoint_x, y, facing, [set(velocity_x, -facing*600-1d200),set(velocity_y, -400)])"
	[editor_info]
	category=milgramen
		[var]
		name=charge_time
		value=2
		[/var]
		[var]
		name=always_active
		type=boolean
		value="0"
		[/var]
	[/editor_info]
	[consts]
	flinch_threshold=1000
	[/consts]
	[vars]
	always_active=0
	charge_up=0
	charge_time=2
	team="'evil'"
	[/vars]
	[animation]
	id="stand"
	image="enemies/bunny-ball-tosser.png"
	duration="4"
	frames="3"
	frames_per_row="1"
	pad="3"
	rect="1,1,62,62"
	reverse="yes"
	body_area=all
	accel_y=70
	[/animation]

	[animation]
	id="throw"
	image="enemies/bunny-ball-tosser.png"
	duration="5"
	frames="12"
	frames_per_row="4"
	pad="3"
	rect="98,1,198,66"
	reverse="no"
	solid_area=40,22,62,60
	body_area=all
	events="42:launch_ball"
	accel_y=70
	[/animation]
#solid_area=10,4,52,62

	[object_type]
	id="cannonball_pile"
	zorder=-3
		[animation]
		id=normal
		image="enemies/bunny-ball-tosser.png"
		rect="66,1,94,27"
		pad="4"
		[/animation]
	[/object_type]
[/object_type]

