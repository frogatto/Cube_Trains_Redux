[object_type]
id=arcade_acorn_dispenser
zorder=5

	[editor_info]
	category=machines
		[var]
		name=timer_offset
		value="50"
		type=int
		[/var]
	[/editor_info]
	
	[vars]
		timer_offset="0"
		dispensing_time="200"
		cycles_elapsed="0"
	[/vars]
	
	on_create="fire_event('set_speed')"
	on_set_speed="set(vars.cycles_elapsed, (timer_offset*dispensing_time)/100)"
	timer_frequency=10
	on_timer="if(vars.cycles_elapsed > dispensing_time,
			[set(vars.cycles_elapsed, 0),
			if(1d4 = 1,
				spawn('acorn_green', midpoint_x+12, y, facing),
				spawn('acorn_ripe', midpoint_x+12, y, facing))
			],
			add(vars.cycles_elapsed, 10))"
		[animation]
		id=normal
		image=props/nutty-factory-machinery.png
		rect=0,64,31,87
		[/animation]
	[/object_type]
