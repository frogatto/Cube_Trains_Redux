#onetime level controllers are like the regular type, except with respawns=no set.  Meaning that their script only happens once per playthrough.

	[object_type]
	id=swinging_log
	next_animation="'normal'"
	
	[editor_info]
		category=controllers
		help="A swinging bar."
		[var]
			name=rotation
			value="65"
		[/var]
		[var]
			name=platform_height
			type=y
			value="midpoint_y+200"
		[/var]
		[var]
			name=damping #@5: ~-.Â½% off velocity each tick#
			type=int
			value="5"
		[/var]
	[/editor_info]
	
	[vars]
		momentum=100
	[/vars]
	[properties]
		length="abs(midpoint_y-vars.platform_height)"
	[/properties]
	
	## origin is done by the controller
	## set up the object straight vertical, give it a editor-specced distance
	## it's already given a base momentum.
	##
	## treat the whole object as having a second "key point" where the platform should be
	## each frame, 'orbit' the key point by some sine function, relative to the current momentum, and relative to the period.  Period determines where we are in the swing, momentum determines the width of the swing.
	## also, each frame, modify the momentum depending on which side of the object (relative to the swing direction) that frogatto is standing on.
	
	
	on_create = "[
		set(alpha, 0),
		spawn('swinging_log.platform', x,y,facing)		
		]"

on_child_spawned="switch(child.type,	'swinging_log.platform', set(vars.platform, child),
										'rope_angled_controller', set(vars.cross_rope, child))"
		
	on_process=""
	
	on_end_anim="animation('normal')"
	zorder=50

		[animation]
		id=normal
		image=effects/particles.png
		x=117
		y=73
		w=28
		h=28
		#collide="0,0,28,28"
		frames=1
		duration=1000
		[/animation]
		
		[object_type]
			id=platform
			next_animation="'normal'"
			
			[properties]
				set_pos="def(new_x,new_y) [set(midpoint_x, new_x), set(y,new_y)]"
			[/properties]
			
			on_create="[set(red, 200), set(green, 200)]"
			
			on_spawned="[set(spawner.vars.platform, spawner.vars.platform + child),
				set(vars.spawner, spawner)]"
			
			#on_platform_stood_on=#
			on_process="if(level.player.is_standing_on_platform and distance(level.player, self) < 50,
			
			
			
			)"
			
			platform_area=0,21,63,22
			[animation]
				image=props/forest-props.png
				id=normal
				x=0
				y=0
				w=63
				h=63
			[/animation]
		[/object_type]
		
		
	[/object_type]