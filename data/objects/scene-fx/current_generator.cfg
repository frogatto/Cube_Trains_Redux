	[object_type]
	id=current_generator
	ignore_collide=true
	body_harmful=no
	body_passthrough=yes
	
	[editor_info]
	category=controllers
		[var]
		name=zone_x1
		type=x
		value="x"
		[/var]
		[var]
		name=zone_x2
		type=x
		value="x+200"
		[/var]
		[var]
		name=zone_y1
		type=y
		value="y"
		[/var]
		[var]
		name=zone_y2
		type=y
		value="y+200"
		[/var]
		[var]
		name=strength
		value="1000"
		[/var]
		[var]
		name=current_vel_x
		value="0"
		[/var]
		[var]
		name=current_vel_y
		value="-200"
		[/var]
	[/editor_info]

	#hack to make it invisible in game, but visible in editor.
	on_create="[set(alpha,0),
		set(current_generator, rect_current(zone_x1, zone_y1 ,abs(zone_x1 - zone_x2) ,abs(zone_y1 - zone_y2) , current_vel_x, current_vel_y, strength)),
		add_particles('particles'),
		fire_event('setup_particles')]"
	
	on_setup_particles="[
		set(particles.velocity_x, current_vel_x*10),
		set(particles.velocity_y, current_vel_y*10),
		set(particles.min_x, min(zone_x1, zone_x2) - x),
		set(particles.max_x, max(zone_x1, zone_x2) - x),
		set(particles.min_y, min(zone_y1, zone_y2) - y),
		set(particles.max_y, max(zone_y1, zone_y2) - y)
		]"
	
	on_end_anim="animation('normal')"
	zorder=50
		[animation]
		id=normal
		image=effects/particles.png
		x=86
		y=11
		w=28
		h=28
		frames=1
		duration=1000
		[/animation]

		[particle_system]
			id=particles
			type=simple
			spawn_rate=3000
			time_to_live=50

				[animation]
				id=sparkle
				image=effects/particles.png
				x=86
				y=3
				w=4
				h=4
				pad=3
				frames=5
				duration=10
				accel_y=-1
				scale=2
				[/animation]
		[/particle_system]
	[/object_type]
