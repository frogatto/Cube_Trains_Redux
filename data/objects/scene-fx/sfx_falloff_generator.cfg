## this one has falloff logic in it (i.e. the sound will fade as the player gets further away).  For optimization purposes, use this one only when we need it, because it polls the player's position to adjust the volume.

	[object_type]
	id=sfx_falloff_generator
	always_active=true
	ignore_collide=true
	body_harmful=no
	body_passthrough=yes

	[editor_info]
	category=controllers
		[var]
		name=effect_name
		type=text
		[/var]
		[var]
		name=falloff_distance
		value=800
		[/var]
	[/editor_info]
	
	#hack to make it invisible in game, but visible in editor.
	on_create="[set(alpha,0),if(effect_name, sound_loop(effect_name))]"

	timer_frequency=5
	on_timer="[sound_volume( if(desired_volume > 7, desired_volume, 0) ),debug(desired_volume)] where desired_volume = (128*((1000*160)/ max(1,(abs(level.player.x - midpoint_x))) ))/1000"


	on_end_anim="animation('normal')"
	zorder=50
		[animation]
		id=normal
		image=effects/particles.png
		x=210
		y=42
		w=28
		h=28
		frames=1
		duration=1000
		[/animation]
	[/object_type]
