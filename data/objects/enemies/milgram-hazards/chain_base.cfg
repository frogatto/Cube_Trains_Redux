{
id: "chain_base",
activation_area: 300,
vars: {
	ball: null,
},
on_create: "[
spawn('chain_base.spiked_ball', x + 16, y + 16, 1, [set_var('radius', 210), set_var('speed', 5), set_var('parent', label)]),

map(range(20), 'radius', spawn('chain_base.chain_link', x + 16, y + 16, 1, [set_var('radius', (radius+1)*10), set_var('parent', label),
  if((radius%2) = 0, [animation('normal2'), set(z, z - 1)], set(z, z - 2))
]))]",
on_child_spawned: "[
	if(child.type = 'chain_base.spiked_ball', set(vars.ball, child),
	  set(child.activation_area, vars.ball.activation_area))
]",
editor_info: {
	category: "enemies, milgramen",
},
animation: {
	id: "normal",
	image: "props/spikedball.png",
	rect: [25,2,41,18],
	collide: [0,0,16,16],
	duration: 10000000,
	palettes: "chrome_to_brass",
},
object_type: [
	{
		id: "spiked_ball",
		properties: {
			attack_damage: 2,
			team: "'evil'",
		},
		on_spawned: "[
	set(activation_area, [x - vars.radius, y, vars.radius*2 + img_w, vars.radius + img_h]),
	set_var('base_x', x), set_var('base_y', y)]",
		on_process: "[
		set(x, vars.base_x + (wave((wave(cycle*vars.speed)+1000)/4 + 250)*vars.radius)/1000),
		set(y, vars.base_y + (wave((wave(cycle*vars.speed)+1000)/4)*vars.radius)/1000),
		set(rotate, 90 + (((wave(cycle*vars.speed)+1000)/2)*180)/1000)]",
		on_cosmic_shift: "[add(vars.base_x, xshift), add(vars.base_y, yshift)]",
		animation: {
			id: "normal",
			image: "props/spikedball.png",
			rect: [1,18,42,60],
			collide: [8,8,32,32],
			duration: 10000000,
			attack_area: "all",
			palettes: "chrome_to_brass",
		},
	},
	{
		id: "chain_link",
		vars: {
			radius: 100,
			x_values: [],
			y_values: [],
			rotation_values: [],
		},
		consts: {
			speed: 5,
			x_schedule_base: [
  0,
  -242,
  -465,
  -651,
  -793,
  -893,
  -954,
  -984,
  -996,
  -999,
  -1000,
  -999,
  -996,
  -984,
  -954,
  -893,
  -793,
  -651,
  -465,
  -242,
  0,
  242,
  470,
  656,
  797,
  896,
  956,
  985,
  997,
  999,
  1000,
  999,
  997,
  985,
  956,
  896,
  797,
  656,
  470,
  242
],
			y_schedule_base: [
  1000,
  970,
  885,
  758,
  607,
  448,
  297,
  175,
  81,
  25,
  0,
  25,
  81,
  175,
  297,
  448,
  607,
  758,
  885,
  970,
  1000,
  970,
  882,
  754,
  602,
  442,
  291,
  168,
  75,
  18,
  0,
  18,
  75,
  168,
  291,
  442,
  602,
  754,
  882,
  970
],
			rotation_schedule_base: [
  180,
  194,
  207,
  220,
  232,
  243,
  252,
  260,
  265,
  268,
  270,
  268,
  265,
  260,
  252,
  243,
  232,
  220,
  207,
  194,
  180,
  165,
  152,
  139,
  127,
  116,
  107,
  99,
  94,
  91,
  90,
  91,
  94,
  99,
  107,
  116,
  127,
  139,
  152,
  165
],
		},
		on_spawned: "[
	  set_var('base_x', x), set_var('base_y', y),
	  set(schedule_speed, 5),

	  set(x_schedule, transform(consts.x_schedule_base, x + (v*vars.radius)/1000)),
	  set(y_schedule,
	            transform(consts.y_schedule_base, y + (v*vars.radius)/1000)),
	  set(rotation_schedule, consts.rotation_schedule_base)
	  ]",
		animation: [
			{
				id: "normal",
				image: "props/spikedball.png",
				rect: [5,7,14,17],
				duration: 100000000,
				palettes: "chrome_to_brass",
			},
			{
				id: "normal2",
				image: "props/spikedball.png",
				rect: [14,7,23,17],
				duration: 100000000,
				palettes: "chrome_to_brass",
			},
		],
	},
],
}