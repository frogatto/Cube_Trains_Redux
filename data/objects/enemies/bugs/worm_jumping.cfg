	[object_type]
	id=worm_jumping

	[editor_info]
	category=bugs
		[var]
		name=x_bound
		type=x
		value="x - 200"
		[/var]
		[var]
		name=x2_bound
		type=x
		value="x + 200"
		[/var]
		[var]
		name=desired_height
		type=y
		value="midpoint_y"
		[/var]
	[/editor_info]

	[vars]
		team="'evil'"
		points_value="14"
		damage=1
		spots=[]
	[/vars]
	[consts]
		basic_type="'worm_jumping'"
		thrown_type="'worm_jumping.thrown'"
		basic_animation="'fly'"
	[/consts]
	prototype=hittable

	[properties]
		x_target="min(vars.x_bound,vars.x2_bound) + 1d(abs(vars.x_bound-vars.x2_bound))"
		y_target="vars.desired_height"
		find_floor="def(u,v) find_floor_wrapped(u,v,0)"
		find_floor_wrapped="def(u,v,counter) if(solid(level,u-5,v,10,10,'debug'), if(counter<50, find_floor_wrapped(u,v-10,counter+1), [u,v]), [u,v])"
	[/properties]


		timer_frequency=10
		on_timer="spawn('worm_jumping.shot', xval, find_floor(xval,y_target)[1], facing, [set(velocity_y,-300)]) where xval = x_target"


		[base:animation]
		image=enemies/mosquito-red.png
		pad=3
		body_area=all
		accel_y=0
		[/animation]

		[animation]
		id=fly
		rect=2,2,32,32
		frames=2
		duration=6
		accel_x=13
		[/animation]

		[animation]
		id=spring
		rect=2,36,32,66
		frames=5
		duration=3
		[/animation]

		[animation]
		id=turn
		rect=2,70,32,100
		frames=1
		duration=10
		[/animation]

		[animation]
		id=hurt
		rect=2,2,32,32
		[/animation]

		[object_type]	
		id=testmark
		dies_on_inactive=yes

		on_end_anim="die()"
			[animation]
			image=enemies/generic.png
			id=normal
			duration=6
			rect=7,19,9,21
			frames=1
			[/animation]
		[/object_type]	



		[object_type]	
		id=shot
		prototype=shot
		traction_in_air=1000
object_level_collisions=no
		dies_on_inactive=yes
			[base:animation]
			image=enemies/generic.png
			[/animation]
			
			#solid_area=0,0,10,10
			timer_frequency=200
			on_timer="die()"
			
			[animation]
			id=normal
			duration=60
			rect=90,5,102,17
			frames=1
			attack_area=all
			#accel_x=-30
			[/animation]
		
		[/object_type]	
		
		
		[object_type]	
		id=thrown
		prototype=throwable_small_enemy
		solid_dimensions=enemy,common

		[consts]
			basic_type="'worm_jumping'"
			thrown_type="'worm_jumping.thrown'"
			basic_animation="'fly'"
		[/consts]

		on_spat="[%PROTO%, set(vars.bomb, null()), set(attached_objects, [])]"

			[base:animation]
			image=enemies/generic.png
			[/animation]

			[animation]
			id=thrown
			thrown_area=all
			duration=60
			rect=29,1,53,28
			frames=1
			body_area=none
			[/animation]
	
			[animation]
			id=on_back
			rect=29,1,53,28
			frames=2
			duration=5
			body_area=all
			[/animation]
		[/object_type]
	[/object_type]
