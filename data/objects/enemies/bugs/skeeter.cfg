	[object_type]
	id=skeeter
	prototype=hittable
	hitpoints=1

	traction_in_air=1000
	friction=1000

	[editor_info]
	category=bugs
		[var]
		name=zone_x1
		type=x
		value="x - 400"
		[/var]
		[var]
		name=zone_x2
		type=x
		value="x + 400"
		[/var]
		[var]
		name=zone_y1
		type=y
		value="y - 400"
		[/var]
		[var]
		name=zone_y2
		type=y
		value="y + 400"
		[/var]
	[/editor_info]

	[properties]
		target_close="if(length(x,y,vars.goal_x,vars.goal_y) < 50, 1, 0)"
		seek_target="def() [add(velocity_x, cos(angle(x,y,vars.goal_x,vars.goal_y)) * velMag),
							add(velocity_y, sin(angle(x,y,vars.goal_x,vars.goal_y)) * velMag),
				] where velMag = 30"
		decelerate="def() [set(velocity_x, velocity_x*0.8), set(velocity_y, velocity_y*0.8)]"
	[/properties]

	on_create="[set(activation_border, max(abs(vars.zone_x2-vars.zone_x1), abs(vars.zone_y2-vars.zone_y1))),
					schedule(200d3, fire_event('warn')),
					set(vars.randSeed, 1d400)]"

	on_warn="[animation('warn'),schedule(20, fire_event('set_goal'))]"
	on_process_warn="if(cycle%2=0, set(brightness,4000),set(brightness,50))"

	on_set_goal="[set(vars.goal_x, vars.zone_x1 + 1d(vars.zone_x2-vars.zone_x1)),
				set(vars.goal_y, vars.zone_y1 + 1d(vars.zone_y2-vars.zone_y1)),
				animation('normal'),
				set(brightness,255),
				schedule(100*1d6, fire_event('warn'))]"
				
	on_process_normal="[if(target_close, if(max(velocity_x,velocity_y >20),decelerate(),animation('hover')), seek_target()),
						facing(sign(velocity_x))]"
	
	on_process_hover="[set(velocity_x,sin(cycle*(8+1d3)+vars.randSeed)*40),set(velocity_y,sin(cycle*(10+1d3)+vars.randSeed)*60)]"
	
	zorder=100
		[animation]
		id=normal
		image=enemies/generic.png
		rect=1,1,25,28
		pad=3
		feet_x=14
		feet_y=22
		[/animation]

		[animation]
		id=hover
		image=enemies/generic.png
		rect=1,1,25,28
		pad=3
		feet_x=14
		feet_y=22
		[/animation]

		[animation]
		id=warn
		image=enemies/generic.png
		rect=1,1,25,28
		pad=3
		feet_x=14
		feet_y=22
		[/animation]
		
	[/object_type]
