[object_type]
id=thunder_melon
prototype=stationary_vulnerable
hitpoints=1
zorder=0
tags=swallowable

[editor_info]
	category=plants
[/editor_info]

object_level_collisions="true"

[consts]
	basic_type="'thunder_melon'"
	springiness=0
	thrown_damage=5
	normal_damage=1
[/consts]

[properties]
	team="if(has_been_spat,'player','neutral')"
[/properties]
[vars]
	has_been_spat=0
	points_value="1"
[/vars]

on_spat="set(vars.has_been_spat, 1)"


on_bounced_on="die()"
on_collide_object_thrown="
[if(collide_with_area = 'body' and collide_with.team != team and vars.damage > 0,
	 [if(collide_with.get_hit_by, [collide_with.get_hit_by(me)]), die()])]"

on_collide_object_body="if(collide_with_area in ['body', 'thrown'], die())"
on_end_normal_anim="animation('normal')"

on_die="[spawn('explosion_big_harmful',midpoint_x,midpoint_y,facing),sound('BombExplode.wav')]"
	on_collide_level="die()"

#solid_area=5,8,18,22

	[base:animation]
	image=props/thunder-melon.png
	pad=3
	body_area=all
	accel_y=00
	[/animation]

	[animation]
	id=normal
	rect=0,0,15,15
	frames=1
	duration=1000
	[/animation]

	[animation]
	id=thrown
	accel_y=80
	rect=0,0,15,15
	frames=1
	duration=1000
	body_area=none
	thrown_area=all
	[/animation]


[/object_type]

