
	[object_type]
	id=frogatto_playable
	hitpoints=2
	mass=5
	springiness=100
	friction=1000
	vehicle=false
	body_harmful=no
		[vars]
		jump_power=1000
		jump_boost=100
		jump_glide=10
		[/vars]

	functions="
	  def set_facing(obj, facing) if(obj.facing != facing,
	           [facing(facing), if(obj.is_standing, animation('turn'))]);
	  def walk(obj, dir)
	    if(obj.is_standing and (not (obj.animation in ['walk', 'jump', 'turn', 'run', 'crouch', 'enter_crouch', 'roll'])), animation('walk'),
		   set(obj, 'velocity_x', obj.velocity_x + obj.jump_glide*dir));
	  def crouch(obj)
	  	if(((not obj.animation in ['crouch', 'enter_crouch', 'roll'] ) and obj.is_standing), animation('enter_crouch'));
	  def roll(obj,dir)
	    if( obj.animation in ['crouch'] and obj.is_standing, animation('roll'));
	  1"

	on_create="[animation('stand')]"
	#on_collide_with="set('hitpoints', hitpoints - 1)"
	on_die="[spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_ctrl_left="set_facing(self, -1)"
	on_ctrl_right="set_facing(self, 1)"
	on_ctrl_jump="if(is_standing, [animation('jump'), set('velocity_y', velocity_y - jump_power)])"
	on_ctrl_attack="roll(self,facing)"

	on_process="[
	    if(ctrl_left, walk(self, -1)),
		if(ctrl_right, walk(self, 1)),
		if(ctrl_down, crouch(self)),
		if((not (ctrl_left or ctrl_right)) and (animation in ['walk', 'run']),
		   animation('stand'))
				]"
					
	on_process_jump="if(ctrl_jump, set('velocity_y', velocity_y - jump_boost))"


	on_end_enter_crouch_anim="animation('crouch')"
	on_end_crouch_anim="if(ctrl_down, animation('crouch'), animation('leave_crouch'))"
	on_end_leave_crouch_anim="animation('stand')"
	
	on_end_roll_anim="animation('stand')"
	on_end_turn_anim="animation('stand')"
	on_end_jump_anim="animation('fall')"
	on_end_walk_anim="animation('walk')"
	on_end_stand_anim="animation('stand')"

	on_collide_feet="animation('stand')"

	[vars]
		unlocked_items="['heart_object','heart_object','fire_powerup']"
	[/vars]

	[portrait]
	image=inventory.png
	rect=85,239,162,312
	[/portrait]
	[name]
	image=inventory.png
	rect=9,252,75,270
	[/name]
	
		[animation]
		id=stand
		image=frogattospritesheet1.png
		collide=10,6,25,22
		rect=2,2,33,34
		feet_x=16
		feet_y=32
		accel_x=0
		accel_y=80
		frames=3
		duration=6
		scale=2
		pad=3
		reverse=yes
		[/animation]
		
		[animation]
		id=crouch
		image=frogattospritesheet1.png
		collide_x=10,16,25,21
		rect=107,197,138,229
		feet_x=16
		feet_y=32
		accel_x=0
		accel_y=80
		frames=1
		duration=1
		scale=2
		pad=3
		rotate_on_slope=yes
		[/animation]

		[animation]
		id=enter_crouch
		image=frogattospritesheet1.png
		collide_x=10,16,25,21
		rect=2,197,33,229
		feet_x=16
		feet_y=32
		accel_x=0
		accel_y=80
		frames=3
		duration=3
		scale=2
		pad=3
		rotate_on_slope=yes
		[/animation]

		[animation]
		id=leave_crouch
		image=frogattospritesheet1.png
		collide_x=10,16,25,21
		rect=2,197,33,229
		feet_x=16
		feet_y=32
		accel_x=0
		accel_y=80
		frames=3
		duration=3
		scale=2
		pad=3
		play_backwards=yes
		rotate_on_slope=yes
		[/animation]


		[animation]
		id=roll
		image=frogattospritesheet1.png
		sound=roll.ogg
		collide_x=10
		collide_y=16
		collide_w=15
		collide_h=5
		feet_x=17
		feet_y=32
		accel_y=80
		accel_x=170
		x=107
		y=197
		w=32
		h=33
		frames=11
		duration=3
		scale=2		
		pad=3
		[/animation]

		
		[animation]
		id=walk
		image=frogattospritesheet1.png
		collide=15,12,33,28
		rect=2,110,49,157
		feet_x=24
		feet_y=42
		accel_y=80
		accel_x=300
		frames=8
		duration=5
		scale=2
		pad=3
		[/animation]

		[animation]
		id=turn
		image=frogattospritesheet1.png
		collide_x=10
		collide_y=6
		collide_w=15
		collide_h=16
		feet_x=16
		feet_y=32
		accel_y=80
		x=387
		y=40
		w=32
		h=33
		frames=1
		duration=5
		[/animation]

		[animation]
		id=jump
		image=frogattospritesheet1.png
		sound=FrogJump1.ogg,FrogJump2.ogg
		collide_x=10
		collide_y=10
		collide_w=15
		collide_h=15
		feet_x=16
		feet_y=40
		accel_y=80
		accel_x=0
		x=2
		y=38
		w=32
		h=48
		frames=2
		pad=3
		duration=6
		scale=2
		[/animation]
	
		[animation]
		id=fall
		image=frogattospritesheet1.png
		collide_x=10
		collide_y=14
		collide_w=15
		collide_h=15
		feet_x=16
		feet_y=40
		accel_y=80
		x=72
		y=38
		w=32
		h=48
		scale=2
		pad=3
		duration=12
		frames=2
		[/animation]



	[/object_type]
