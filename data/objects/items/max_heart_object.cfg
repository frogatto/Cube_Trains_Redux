	[object_type]
	id=max_heart_object

	[editor_info]
	category=items
	[/editor_info]

	on_collide_object_body="if(collide_with.player,fire_event('acquired'))"
	
	on_acquired="[animation('touched'),music_onetime('specialitem.ogg'), set(level.player.driver.max_hitpoints, level.player.driver.max_hitpoints + 1), set(level.player.driver, 'hitpoints', level.player.driver.hitpoints + 1), map([0,0,0,0,0,0,0,0,0,0],spawn('heart_sparkle',midpoint_x,midpoint_y,0)),
	spawn('color_flash',x,y,0,[set_value('color_r',237),set('color_g',28),set('color_b',36)]),
		speech_dialog([~You have acquired a heart capsule.~,~Your maximum HP has increased by one!~])]"
	
	on_end_normal_anim="animation('normal')"
	on_end_touched_anim="die()"
	respawns=no

		[animation]
		id=normal
		image=props/items.png
		body_area=all
		x=5
		y=4
		w=22
		h=36
		frames=4
		pad=3
		duration=4
		reverse=yes
		[/animation]
		
		[animation]
		id=touched
		image=props/items.png
		x=105
		y=4
		w=22
		h=36
		frames=1
		pad=3
		duration=8
		reverse=yes
		[/animation]
	[/object_type]
