[object_type]
id=rpg_battle_controller
	
[editor_info]
category=rpg-control
[/editor_info]

zorder=50

[properties]
	combatant_finished="def(he_who_hath_finished) 
							map(vars.combatants, 'combatant',  if(he_who_hath_finished = combatant, set(vars.active_combatant, vars.combatants[(index + 1)  % (vars.combatants.size)] )) )"
							# wrap-around the above list if we overflow
	
	start_next_combatant=""
	
[/properties]

[vars]
	combatants=['a','b','c','d','e','f','g']
	active_combatant=0
[/vars]
	
	on_create="set(vars.active_combatant, combatants[1])"

	on_process="[ combatant_finished(vars.active_combatant),
					debug(vars.active_combatant)]"
	
	
	[animation]
	id=normal
	image=effects/particles.png
	x=148
	y=135
	w=28
	h=28
	frames=1
	duration=100000
	[/animation]

[/object_type]
