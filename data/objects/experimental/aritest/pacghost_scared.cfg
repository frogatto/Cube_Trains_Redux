[object_type]
id=pacghost_scared
solid_area=1,1,15,15
hitpoints=1
[vars]
gizmos = 0
cooldown = 0
movement = [1d2-2, 1d2-2]
#label='ghost'
[/vars]

[properties]
	team="'monster'"
	#set_gizmos="def(val) set(vars.gizmos, val)"  gizmos="vars.gizmos"
[/properties]

[editor_info]
	category=aritest
[/editor_info]

#on_create="set(me.label, "'ghost'")"

on_process="[

	if(vars.movement = [-1,0] and (facing > 0 or (not animation='walk_east')),
		[animation('walk_east'), facing(-1)]),
	if(vars.movement = [1,0] and (facing < 0 or (not animation='walk_east')),
		[animation('walk_east'), facing(1)]),
	if(vars.movement = [0,-1] and (not animation='walk_north'),
		[animation('walk_north')]),
	if(vars.movement = [0,1] and (not animation='walk_south'),
		[animation('walk_south')]),
	if(vars.movement = [ 0, 0], [
		if(animation='walk_north', animation('stand_north')),
		if(animation='walk_east', animation('stand_east')),
		if(animation='walk_south', animation('stand_south'))
		]),
	

	set(velocity_x, vars.movement[0]*150),
	set(velocity_y, vars.movement[1]*150),

	set(vars.cooldown, vars.cooldown+1),
	if(vars.cooldown>150, [
		spawn('pacghost',midpoint_x,midpoint_y,facing),
		die()
	]),
	set(vars.movement, [-(level.player.x-x)/abs(level.player.x-x), -(level.player.y-y)/abs(level.player.y-y)])
]"

on_end_anim="[
	animation(animation)
]"

on_collide_object="[
	set(vars.cooldown, 0),
	if(collide_with.team='player' and collide_with_area = 'attack', add(me.hitpoints, -1))
]"

on_superpacgum_eaten="[
	set(vars.cooldown, 0)
]"

on_pleasedie="die()"

#if(collide_with.team='monster' and collide_with_area = 'body', add(collide_with.hitpoints, -1)),
#	gold(level,1),
#	sound('coin.ogg')

[base:animation]
	image=experimental/aritest/pacman.png
	accel_x=0
	accel_y=0
	pad=0
	#attack_area=solid:0,0,15,15
	attack_area=0,0,15,15
[/animation]

[animation]
	id=stand_north
	rect=64,32,79,47
	frames=1
	duration=6
[/animation]

[animation]
	id=walk_north
	rect=64,32,79,47
	frames=3
	duration=6
[/animation]

[animation]
	id=stand_south
	rect=64,0,79,15
	frames=1
	duration=6
[/animation]

[animation]
	id=walk_south
	rect=64,0,79,15
	frames=3
	duration=6
[/animation]

[animation]
	id=stand_east
	rect=64,16,79,31
	frames=1
	duration=6
[/animation]

[animation]
	id=walk_east
	rect=64,16,79,31
	frames=3
	duration=6
[/animation]

[/object_type]
