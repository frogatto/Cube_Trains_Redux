[object_type]
  id=repeater
  prototype=evil_cell

  [properties]
    type="repeater"
  [/properties]
  [editor_info]
    category="cellular"
    [var]
    name=max_bobbers
    value=30
    [/var]
  [/editor_info]

  [vars]
    spawned_bobbers=0
  [/vars]

  hitpoints=50
  solid_area=0,0,45,26
  timer_frequency=3

  on_load="[
    %PROTO%,
    schedule(5,fire_event('shoot')),
    schedule(20,fire_event('spawn_bobber'))
  ]"

  on_shoot="[
    add(vars.rotamnt,10),
    add(vars.rotamnt2,-10),
    spawn('redbullet',midpoint_x,midpoint_y,0,[
      set(trackx,((1)*cos(rotamnt)) - (5*sin(rotamnt)) + midpoint_x),
      set(tracky,((1)*sin(rotamnt)) + (5*cos(rotamnt)) + midpoint_y)
    ]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[
      set(trackx,((1)*cos(rotamnt2)) - (5*sin(rotamnt2)) + midpoint_x),
      set(tracky,((1)*sin(rotamnt2)) + (5*cos(rotamnt2)) + midpoint_y)
    ]),
    schedule(5,fire_event('shoot'))
  ]"

  on_spawn_bobber="[
    if(vars.spawned_bobbers < max_bobbers,[
      spawn('bobber',midpoint_x,midpoint_y+10,0),
      add(vars.spawned_bobbers,1),
      schedule(20,fire_event('spawn_bobber'))
    ])
  ]"


  [base:animation]
    image=experimental/cellular/frigate.png
    accel_x=0
    accel_y=0
    pad=0
    body_area=all
  [/animation]
  [animation]
    id=stand_north
    rect=1,1,46,27
    frames=1
    duration=6
  [/animation]
[/object_type]
