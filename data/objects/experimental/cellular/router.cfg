[object_type]
  id=router

  [properties]
    type="router"
    team="'neutral'"
  [/properties]
  [editor_info]
    category=cellular
    [var]
    name=dest_level
    type=level
    [/var]
    [var]
    name=dest_door
    type=label
    info=dest_level
    [/var]
  [/editor_info]
  timer_frequency=100

  on_load="[
    set(tmp.ready,0),
    set(tmp.active,0)
  ]"

  on_timer="set(tmp.ready,1)"

  on_collide_object_body="[
    if(collide_with=level.player and tmp.ready=1 and tmp.active!=1,[
      set(tmp.active,1),
      animation('activate')
    ],
      if(collide_with=level.player and tmp.doubleactive=1,[
	  teleport(dest_level, dest_door,'instant'),
      ])
    )
  ]"

  on_end_anim="[
    if(tmp.active=1,[
      set(tmp.doubleactive,1),
    ])
  ]"


  [base:animation]
    image=experimental/cellular/router.png
    accel_x=0
    accel_y=0
    pad=0
    body_area=all
  [/animation]
  [animation]
    id=stand_north
    rect=1,1,46,27
    pad=1
    frames=1
    duration=6
  [/animation]
  [animation]
    id=activate
    rect=1,1,46,27
    pad=1
    frames=8
    duration=6
  [/animation]
[/object_type]
