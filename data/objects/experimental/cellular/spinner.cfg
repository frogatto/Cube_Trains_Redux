[object_type]
  id=spinner
  hitpoints=10
  feet_width=1
  mass=5
  traction_in_air=1000
  friction=1000
  solid_area=0,0,15,15
  zorder=30
  no_move_to_standing=yes
  always_active=yes

  [vars]
    speed=2
    firing=0
    xdirection=0
  [/vars]

  [properties]
    type="bobber"
  [/properties]

  timer_frequency=60

  on_load="[
    add_particles('trail')
  ]"

  on_timer="[
    set(rotate, rotate+10),
    set(accel_x, 20*vars.speed*if(midpoint_x < level.player.midpoint_x, 1, -1)),
    set(accel_y, 20*vars.speed*if(midpoint_y < level.player.midpoint_y, 1, -1)),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y)])
  ]"

  [editor_info]
    category=cellular
  [/editor_info]

  [base:animation]
    image=experimental/cellular/spinner.png
    accel_x=0
    accel_y=0
    pad=0
    body_area=all
  [/animation]

  [animation]
    id=stand_north
    rect=2,2,17,17
    frames=1
    duration=6
  [/animation]

  [particle_system]
    id=trail
    type=point
    generation_rate_millis=900
    time_to_live=1000
    time_to_live_rand=2000
    colors="f9f9dbff,ffc20eff,ffc20e55,ff7e0055,ae4a2855"
    pos_x=10
    pos_y=10
    velocity_x=0
    velocity_y=0
  [/particle_system]
[/object_type]
