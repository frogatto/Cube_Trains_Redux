[object_type]
  id=redbullet
  traction_in_air=1000
  friction=0
  object_level_collisions=yes
  always_active=yes
  [editor_info]
    category=items
  [/editor_info]

  [vars]
    trackx=0
    tracky=0
    parent=0
  [/vars]
  [properties]
    type="bullet"
  [/properties]

  on_spawned="[
    set(vars.parent,spawner),
    set(velocity_x,cos(angle(midpoint_x,midpoint_y,trackx,tracky))*1500),
    set(velocity_y,sin(angle(midpoint_x,midpoint_y,trackx,tracky))*1500)
  ]"

  on_collide_level="[die()]"
  on_collide_object_body="[if(collide_with.type!=type and collide_with.type!=vars.parent.type,[
    die(),
    if(collide_with.hitpoints <=1, set(collide_with.solid_dimensions_in, none)),
    add(collide_with.hitpoints, -1)])]"

  on_die="[
    spawn('pollen_impact_particle',midpoint_x,midpoint_y,0)
  ]"

  [base:animation]
    image=experimental/cellular/red_bullet.png
    rect=0,0,2,2
    accel_x=0
    accel_y=0
    body_area=all
  [/animation]
  [animation]
    id=appear
    rect=0,0,2,2
    frames=1
  [/animation]
[/object_type]
