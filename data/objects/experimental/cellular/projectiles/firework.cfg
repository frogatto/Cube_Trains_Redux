[object_type]
  id=firework
  prototype=cell_projectile

  timer_frequency=50

  on_spawned="[
    %PROTO%,
    set(vars.team,spawner.vars.team)
  ]"

  on_timer="fire_event('triggered')"

  on_collide_level="fire_event('triggered')"

  on_triggered="[
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y+20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x-20), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y-20)]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,midpoint_x+20), set(tracky,midpoint_y)]),
    die()
  ]"

  [base:animation]
    image=experimental/cellular/bullets.png
    rect=0,0,3,3
    accel_x=0
    accel_y=0
    body_area=all
  [/animation]
  [animation]
    id=appear
    rect=6,6,9,9
    frames=1
  [/animation]
[/object_type]
