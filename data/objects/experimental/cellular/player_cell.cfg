[object_type]
  id=player_cell
  hitpoints=10
  feet_width=1
  mass=5
  friction=0
  solid_area=0,0,15,15
  zorder=30
  is_human=yes
  no_move_to_standing=yes

  [properties]
    movement="[if('d' in ctrl_keys,1,0) - if('a' in ctrl_keys,1,0), if('w' in ctrl_keys,1,0) - if('s' in ctrl_keys,1,0)]"
  [/properties]

  [vars]
    speed=2
    firing=0
    fire_rate=9
    energy=1000
  [/vars]

  timer_frequency=3

  on_load="[
    add_particles('trail')
  ]"

  on_timer="[
    if(vars.firing = 1,[
      [spawn('redbullet',midpoint_x,midpoint_y,0,[set(trackx,ctrl_mice[0][0]*2+level.camera_position[0]), set(tracky,ctrl_mice[0][1]*2+level.camera_position[1])])],
      set(vars.firing, 0),
      set(vars.energy,vars.energy -2),
      debug(cycle)
    ])
  ]"

  on_process="[
    debug(ctrl_keys),
    set(velocity_x, (movement[0]*500 - abs(movement[1])*100*movement[0])*vars.speed),
    set(velocity_y, -(movement[1]*500 - abs(movement[0])*100*movement[1])*vars.speed),
    if('left' in ctrl_mice[0], set(vars.firing,1))
  ]"

  [editor_info]
    category=cellular
  [/editor_info]

  [base:animation]
    image=experimental/cellular/cell.png
    accel_x=0
    accel_y=0
    pad=0
    body_area=all
  [/animation]

  [animation]
    id=stand_north
    rect=2,2,17,17
    frames=1
    duration=6
  [/animation]

  [particle_system]
    id=trail
    type=point
    generation_rate_millis=1500
    time_to_live=1000
    time_to_live_rand=2000
    colors="00D3FFff,00A2C3ff,00A2C355,00839D55,00799055"
    pos_x=10
    pos_y=10
    velocity_x=0
    velocity_y=0
  [/particle_system]
[/object_type]
