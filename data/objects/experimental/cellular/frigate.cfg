[object_type]
  id=frigate
  prototype=evil_cell

  [properties]
    type="frigate"
  [/properties]
  [editor_info]
    category="cellular"
    [var]
    name=max_bobbers
    value=30
    [/var]
  [/editor_info]

  [vars]
    spawned_bobbers=0
  [/vars]

  hitpoints=50
  solid_area=0,0,45,26
  timer_frequency=3

  on_timer="[
    add(vars.rotamnt,10),
    add(vars.rotamnt2,-10),
    spawn('redbullet',midpoint_x,midpoint_y,0,[
      set(trackx,((1)*cos(rotamnt)) - (5*sin(rotamnt)) + midpoint_x),
      set(tracky,((1)*sin(rotamnt)) + (5*cos(rotamnt)) + midpoint_y)
    ]),
    spawn('redbullet',midpoint_x,midpoint_y,0,[
      set(trackx,((1)*cos(rotamnt2)) - (5*sin(rotamnt2)) + midpoint_x),
      set(tracky,((1)*sin(rotamnt2)) + (5*cos(rotamnt2)) + midpoint_y)
    ]),
    if(cycle-vars.last_spawn > 20 and vars.spawned_bobbers < max_bobbers,[
      spawn('bobber',midpoint_x,midpoint_y+10,0),
      add(vars.spawned_bobbers,1),
      set(vars.last_spawn, cycle)
    ])
  ]"


  [base:animation]
    image=experimental/cellular/frigate.png
    accel_x=0
    accel_y=0
    pad=0
    body_area=all
  [/animation]
  [animation]
    id=stand_north
    rect=1,1,46,27
    frames=1
    duration=6
  [/animation]
[/object_type]
