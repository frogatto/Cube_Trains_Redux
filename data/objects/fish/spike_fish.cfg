
	[object_type]
	id=spike_fish
	hitpoints=1
	friction=3

	on_hit_by_player="die()"
	on_die="[score(20), spawn_item(me), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_process="if(solid(level, front + facing*90, y, 1, y2 - y),
	            [facing(-facing), animation('turn')], null())"
	on_end_anim="[if(facing < 0 and x < vars.x_bound or
	                facing > 0 and x2 > vars.x2_bound,
					[facing(-facing), animation('turn')],
					animation('swim'))]"
	on_collide="[facing(-facing), animation('turn')]"

		[animation]
		id=swim
		image=enemies/spike_fish.png
		duplicates=12
		rect=3,2,32,24
		collide_x=2
		collide_y=2
		collide_w=26
		collide_h=19
		feet_x=14
		feet_y=20
		frames=2
		pad=3
		duration=6
		accel_x=20
		[/animation]

		[animation]
		id=swim
		image=enemies/spike_fish.png
		rect=3,29,32,51
		collide_x=2
		collide_y=2
		collide_w=26
		collide_h=19
		feet_x=14
		feet_y=20
		frames=2
		pad=3
		duration=6
		accel_x=20
		reverse=yes
		[/animation]

		[animation]
		id=spike
		image=enemies/spike_fish.png
		rect=69,30,98,55
		collide_x=4
		collide_y=6
		collide_w=22
		collide_h=18
		feet_x=14
		feet_y=22
		frames=1
		pad=3
		duration=10
		[/animation]

		[animation]
		id=turn
		image=enemies/spike_fish.png
		rect=69,2,98,24
		collide_x=2
		collide_y=2
		collide_w=26
		collide_h=19
		feet_x=14
		feet_y=20
		frames=2
		pad=3
		duration=6
		[/animation]

	[/object_type]
