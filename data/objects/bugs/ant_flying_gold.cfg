	
	[object_type]
	id=ant_flying_gold
	prototype=ant_flying
	
	[vars]
		points_value="23"
	[/vars]
	
	mass=3

	[properties]
	facing_player="facing = if(level.player.midpoint_x < midpoint_x, -1, 1)"
	[/properties]

	on_timer="[%PROTO%, if(animation = 'fly' and (not vars.bomb) and cycle > vars.launch_at,
	            [set(vars.bomb, new_object), set(attached_objects, [new_object]), set(vars.launch_at, cycle+50)] where new_object = object('moth_bomber_bomb', midpoint_x, midpoint_y + 30, -1, {'animation' -> 'normal2'})),
				if(vars.bomb and cycle > vars.launch_at and
				   midpoint_x > level.player.midpoint_x - 200 and
				   midpoint_x < level.player.midpoint_x + 200 and
				   facing_player,
				   [set(vars.bomb.animation, 'danger'),
				    set(vars.launch_at, cycle + 25)
				   ]
						),
				if(vars.bomb and cycle > vars.launch_at and vars.bomb.animation = 'danger',
					   [
						set(vars.bomb.velocity_x, velocity_x),
						set(vars.bomb, null()),
						set(vars.bomb.animation, 'normal2'),
						set(attached_objects, []),
						add_object(vars.bomb),
						set(vars.launch_at, cycle+100)
					   ]
				)
				]"
	
	on_process="[%PROTO%, if(vars.bomb, [
	    set(vars.bomb.midpoint_x, midpoint_x), set(vars.bomb.midpoint_y, midpoint_y + 30), set(vars.bomb.time_in_animation, vars.bomb.time_in_animation+1)])]"
	
	on_lose_wings="[%PROTO%, set(vars.bomb, null()), set(attached_objects, [])]"

	[vars]
		points_value=5
		turns_at_cliffs=1
		bomb="null()"
		launch_at=0
	[/vars]

	[consts]
	walking_type="'ant_gold'"
	[/consts]

		[base:animation]
		image=enemies/ant-flying-gold.png
		rotate_on_slope=yes
		pad=3
		accel_x=0
		accel_y=80
		body_area=all
		[/animation]

		
		[animation]
		id=fly
		duplicates=6
		rect=3,96,27,123
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=10
		[/animation]
		
		[animation]
		id=fly		#blink variant
		rect=3,220,27,247
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=10
		[/animation]
		
		[animation]
		id=turnFly
		rect=3,127,27,154
		frames=2
		frames_per_row=1
		duration=4
		accel_y=0
		[/animation]

		[animation]
		id=hurtLoseWings
		rect=3,189,27,216
		frames=3
		duration=6
		accel_y=40
		events="6:12:18:hurtflicker"
		[/animation]

	
		[animation]
		id=stand
		rect=3,1,27,28
		frames=1
		duration=6
		accel_y=80
		accel_x=0
		[/animation]
	
		[animation]
		id=thrown
		rect=31,33,55,60
		frames=1
		body_area=none
		[/animation]
	
		[animation]
		id=on_back
		rect=31,33,55,60
		frames=1
		body_area=none
		[/animation]

		[animation]
		id=walk   #blink variant
		accel_x=300
		rect=89,1,113,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=walk
		duplicates=6
		accel_x=300
		rect=3,1,27,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=spring
		rect=3,33,27,60
		frames=1
		duration=4
		[/animation]

		[animation]
		id=turn
		rect=3,65,27,92
		frames=3
		duration=4
		[/animation]

		[animation]
		id=hurt
		rect=90,65,114,92
		frames=1
		duration=18
		events="6:12:18:hurtflicker"
		[/animation]

	[/object_type]

