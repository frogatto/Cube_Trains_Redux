	
	[object_type]
	id=moth
	prototype=ant
	traction_in_air=1000
	friction=1000
	traction=1000

	[vars]
		points_value="164"
		turns_at_cliffs=1
	[/vars]

	[editor_info]
	category=bugs
		[var]
		name=x_bound
		type=x
		value="x - 200"
		[/var]
		[var]
		name=x2_bound
		type=x
		value="x2 + 200"
		[/var]
		[var]
		name=desired_height
		type=y
		value="y - 200"
		[/var]
	[/editor_info]

	on_process_fly="[if(abs(y - vars.desired_height) > 10, set(velocity_y, (600*if(vars.desired_height < y, -1, 1))), set(velocity_y, 0)),
	
	if(solid(level, front + facing*50, y, 1, y2 - y) or (facing < 0 and x < vars.x_bound) or (facing > 0 and x2 > vars.x2_bound),
	[facing(-facing), animation('turn')])]"
	
	on_end_anim="if(animation in ['fly','turnFly'], animation('fly'), %PROTO%)"

	on_end_turn_anim="if(1d2=2,animation('fly'),animation('walk'))"

		[base:animation]
		image=enemies/moth.png
		rotate_on_slope=yes
		pad=3
		accel_x=0
		accel_y=80
		body_area=all
		[/animation]

	
		[animation]
		id=stand
		rect=3,1,27,28
		frames=1
		duration=6
		[/animation]
	
		[animation]
		id=thrown
		thrown_area=all
		body_area=none
		rect=31,33,55,60
		frames=2
		[/animation]

		[animation]
		id=on_back
		rect=31,33,55,60
		frames=2
		[/animation]

		[animation]
		id=walk   #blink variant
		accel_x=250
		rect=89,1,113,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=walk
		duplicates=6
		accel_x=250
		rect=3,1,27,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=spring
		rect=59,189,83,216
		frames=2
		duration=4
		[/animation]

		[animation]
		id=turn
		rect=3,65,27,92
		frames=3
		duration=4
		[/animation]

		[animation]
		id=hurt
		rect=90,65,114,92
		frames=1
		duration=18
		events="6:12:18:hurtflicker"
		[/animation]
		
		
		[animation]
		id=fly
		rect=3,96,27,123
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=10
		[/animation]
		
		[animation]
		id=turnFly
		rect=3,127,27,154
		frames=2
		frames_per_row=1
		duration=4
		[/animation]
	[/object_type]

