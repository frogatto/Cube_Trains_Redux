[object_type]
id=ant_flying_glow
prototype=ant_flying
mass=3

	[vars]
		points_value="4"
	[/vars]

has_feet=no

timer_frequency=5
on_collide_head="[%PROTO%, die()]"
on_create="[%PROTO%, set(lights, circle_light(me, 180))]"
on_timer="if(animation in ['fly', 'turnFly'],
           [if(animation = 'fly', set(animation, 'flyGlow'),
		                          set(animation, 'turnFlyGlow')),
		   set(time_in_animation, time_in_animation),
		   schedule(2, fire_event('unglow'))])"

on_unglow="[if(animation = 'flyGlow',
               set(animation, 'fly'),
			   if(animation = 'turnFlyGlow',
			      set(animation, 'turnFly'))),
				  set(time_in_animation, time_in_animation)]"

on_lose_wings="[set(animation, 'on_back')]"

#if we get up from being on our back, try to adjust our new flying range
#to something reasonable given our new position.
on_get_up_from_on_back="[
	  set(vars.x_bound,  midpoint_x - (vars.x2_bound - vars.x_bound)/2),
	  set(vars.x2_bound, midpoint_x + (vars.x2_bound - vars.x_bound)/2),
	  if(vars.desired_height > (midpoint_y - 20),
		 set(vars.desired_height, midpoint_y - 200))]"


	[vars]
		points_value=5
		turns_at_cliffs=1
	[/vars]

	[consts]
		walking_type="'ant_flying_glow.thrown_ant'"
	[/consts]

	[base:animation]
	image=enemies/glow-ant.png
	pad=3
	accel_x=0
	accel_y=80
	body_area=all
	[/animation]

	[animation]
	id=fly
	duplicates=6
	rect=3,2,27,29
	frames=4
	reverse=yes
	duration=6
	accel_y=0
	accel_x=10
	attack_area=0,14,28,28
	[/animation]

	[animation]
	id=flyGlow
	duplicates=6
	rect=115,2,139,29
	frames=4
	reverse=yes
	duration=6
	accel_y=0
	accel_x=10
	attack_area=0,14,28,28
	[/animation]

	[animation]
	id=turnFly
	rect=3,33,27,60
	frames=2
	frames_per_row=1
	duration=4
	accel_y=0
	attack_area=0,14,28,28
	[/animation]

	[animation]
	id=turnFlyGlow
	rect=115,33,139,60
	frames=2
	frames_per_row=1
	duration=4
	accel_y=0
	attack_area=0,14,28,28
	[/animation]

	[animation]
	id=thrown
	rect=31,95,55,122
	frames=1
	body_area=none
	accel_x=0
	accel_y=80
	[/animation]

	[animation]
	id=on_back
	rect=31,95,55,122
	frames=2
	body_area=none
	[/animation]

	[animation]
	id=stand
	rect=31,95,55,122
	frames=2
	body_area=none
	[/animation]

	[object_type]
	id=thrown_ant
	prototype=ant

	on_get_up_from_on_back="[%PROTO%, [set(type, 'ant_flying_glow'), set(animation, 'fly'), fire_event('get_up_from_on_back')
	  ]]"

		[base:animation]
		image=enemies/glow-ant.png
		pad=3
		accel_x=0
		accel_y=80
		body_area=all
		[/animation]

		[animation]
		id=stand
		rect=31,95,55,122
		frames=2
		body_area=none
		[/animation]

		[animation]
		id=walk
		rect=31,95,55,122
		frames=2
		body_area=none
		[/animation]

		[animation]
		id=thrown
		rect=31,95,55,122
		frames=1
		body_area=none
		accel_x=0
		accel_y=80
		[/animation]

		[animation]
		id=on_back
		rect=31,95,55,122
		frames=2
		[/animation]

	[/object_type]

[/object_type]
