
	[object_type]
	id=wartfly
	hitpoints=1
	mass=5
	springiness=100
	friction=5

	on_hit_by_player="die()"
	on_die="[score(level,20), spawn_item(me), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_create="set_var('base_y', y)"

	on_process="[if(solid(level, front + facing*50, y, 1, y2 - y),
	            [facing(-facing), animation('turn')], null()),
	            
	            set(y, vars.base_y + (wave(cycle*5+1000)/15))]"
	on_end_anim="[if(facing < 0 and x < vars.x_bound or
	                facing > 0 and x2 > vars.x2_bound,
					[facing(-facing), animation('turn')],
					animation('fly'))]"
	on_collide_side="[facing(-facing), animation('turn')]"
	on_jumped_on="animation('spring')"
	#on_collide_with="elastic_collision(collide_with,me)"
		[animation]
		id=fly
		image=enemies/wartfly.png
		duplicates=12
		rect=2,2,32,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=20
		[/animation]

		[animation]
		id=fly
		image=enemies/wartfly.png
		rect=70,2,100,32
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=2
		pad=3
		duration=6
		accel_x=20
		reverse=yes
		[/animation]

		[animation]
		id=spring
		image=enemies/wartfly.png
		rect=2,36,32,66
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=5
		pad=3
		duration=3
		[/animation]

		[animation]
		id=turn
		image=enemies/wartfly.png
		rect=2,70,32,100
		collide_x=2
		collide_y=12
		collide_w=28
		collide_h=16
		feet_x=10
		feet_y=18
		frames=1
		pad=3
		duration=10
		[/animation]

	[/object_type]
