	
	[object_type]
	id=ant_flying_wallcling
	prototype=ant_flying
	
	mass=3

	[vars]
		points_value="6"
		turns_at_cliffs=1
	[/vars]
	[consts]
		basic_type="'ant_flying_wallcling'"
		thrown_type="'ant_flying_wallcling.thrown'"
		basic_animation="'fly'"
	[/consts]
	
	
	on_collide_side="[set(velocity_x,0),[facing(-facing),animation('cling')]]"
	on_process_fly="[#if(solid(level, front + facing*100, y, 1, y2 - y),
	            fire_event('turn')),#fire_event('test_bounds'),
	            set(velocity_y, wave( min(250,max(-250, destination_height-midpoint_y ) ) ))
	            
	            ] where destination_height = vars.desired_height"
		
	on_process_cling="if(abs(level.player.y - y)<20,animation('fly'))"

	on_end_anim="if(animation in ['cling'],animation('cling'),animation('fly'))"

		[base:animation]
		image=enemies/fly-wallclinging-green.png
		rotate_on_slope=yes
		pad=3
		accel_x=0
		accel_y=80
		body_area=all
		[/animation]


		[animation]
		id=cling
		rect=115,127,139,154
		frames=1
		duration=30
		accel_y=0
		accel_x=0
		attack_area=0,14,28,28
		[/animation]

		
		[animation]
		id=fly
		duplicates=6
		rect=3,96,27,123
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=40
		attack_area=0,14,28,28
		[/animation]
		
		[animation]
		id=fly		#blink variant
		rect=3,220,27,247
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=40
		attack_area=0,14,28,28
		[/animation]
		
		[animation]
		id=turn
		rect=3,127,27,154
		frames=2
		frames_per_row=1
		duration=4
		accel_y=0
		attack_area=0,14,28,28
		[/animation]

		[animation]
		id=lose_wings
		rect=3,189,27,216
		frames=3
		duration=6
		accel_y=40
		events="6:12:18:hurtflicker"
		[/animation]
		
		[animation]
		id=hurt
		rect=3,189,27,216
		frames=3
		duration=6
		accel_y=40
		events="6:12:18:hurtflicker"
		[/animation]
		
		
		[object_type]	
		id=thrown
		prototype=throwable_small_enemy
		solid_dimensions=enemy,common
		solid_area=5,10,20,25

		[consts]
			basic_type="'ant_flying_wallcling'"
			thrown_type="'ant_flying_wallcling.thrown'"
			basic_animation="'fly'"
		[/consts]

		on_spat="[%PROTO%, set(vars.bomb, null()), set(attached_objects, [])]"

			[base:animation]
			image=enemies/fly-wallclinging-green.png
			[/animation]

			[animation]
			id=thrown
			thrown_area=all
			duration=60
			rect=31,33,55,60
			frames=1
			body_area=none
			[/animation]
	
			[animation]
			id=on_back
			rect=31,33,55,60
			frames=2
			duration=5
			body_area=all
			[/animation]
		[/object_type]

	[/object_type]

