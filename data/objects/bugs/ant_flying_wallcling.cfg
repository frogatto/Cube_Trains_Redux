	
	[object_type]
	id=ant_flying_wallcling
	prototype=ant_flying
	
	mass=3

	[vars]
		points_value="127"
		turns_at_cliffs=1
	[/vars]
	
	
#		on_collide_side="solid(level, front + facing*50, y, 1, y2 - y)"
		on_collide_side="[set(velocity_x,0),animation('cling')]"
		
		on_process_cling="if(abs(level.player.y - y)<20,animation('fly'))"
		on_collide_object_body=""

	on_process_fly="[if(abs(y - vars.desired_height) > 10, set(velocity_y, (600*if(vars.desired_height < y, -1, 1))), set(velocity_y, 0)),
	
	if(solid(level, front + facing*50, y, 1, y2 - y) or (facing < 0 and x < vars.x_bound) or (facing > 0 and x2 > vars.x2_bound),
	[facing(-facing), animation('turnFly')])]"

	on_end_anim="if(animation in ['fly','flyGlow','turnFly','turnFlyGlow'], if(strstr(animation, 'Glow'), animation('flyGlow'), animation('fly')), if(animation in ['cling'],animation('cling'),animation('stand')))"

		[base:animation]
		image=enemies/ant-flying-black.png
		rotate_on_slope=yes
		pad=3
		accel_x=0
		accel_y=80
		body_area=all
		[/animation]


		[animation]
		id=cling
		rect=3,96,27,123
		frames=1
		duration=30
		accel_y=0
		accel_x=0
		attack_area=0,14,28,28
		[/animation]

		
		[animation]
		id=fly
		duplicates=6
		rect=3,96,27,123
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=40
		attack_area=0,14,28,28
		[/animation]
		
		[animation]
		id=fly		#blink variant
		rect=3,220,27,247
		frames=4
		reverse=yes
		duration=6
		accel_y=0
		accel_x=40
		attack_area=0,14,28,28
		[/animation]
		
		[animation]
		id=turnFly
		rect=3,127,27,154
		frames=2
		frames_per_row=1
		duration=4
		accel_y=0
		attack_area=0,14,28,28
		[/animation]

		[animation]
		id=hurtLoseWings
		rect=3,189,27,216
		frames=3
		duration=6
		accel_y=40
		events="6:12:18:hurtflicker"
		[/animation]

	
		[animation]
		id=stand
		rect=3,1,27,28
		frames=1
		duration=6
		accel_y=80
		accel_x=0
		[/animation]
	
		[animation]
		id=thrown
		rect=31,33,55,60
		frames=1
		body_area=none
		[/animation]
	
		[animation]
		id=on_back
		rect=31,33,55,60
		frames=1
		body_area=none
		[/animation]

		[animation]
		id=walk   #blink variant
		accel_x=300
		rect=89,1,113,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=walk
		duplicates=6
		accel_x=300
		rect=3,1,27,28
		frames=3
		duration=6
		[/animation]

		[animation]
		id=spring
		rect=3,33,27,60
		frames=1
		duration=4
		[/animation]

		[animation]
		id=turn
		rect=3,65,27,92
		frames=3
		duration=4
		[/animation]

		[animation]
		id=hurt
		rect=90,65,114,92
		frames=1
		duration=18
		events="6:12:18:hurtflicker"
		[/animation]

	[/object_type]

