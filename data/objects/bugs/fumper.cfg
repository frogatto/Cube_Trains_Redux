	
	[object_type]
	id=fumper
	hitpoints=3
	friction=1000
	traction=1000

	[vars]
		team="'evil'"
		damage=1
		points_value=25
		turns_at_cliffs=1
	[/vars]

	on_die="[score(level,points_value), spawn('die_cloud', midpoint_x, midpoint_y, facing)]"
	on_collide_head="set('velocity_y', 0)"
	on_collide_feet="[animation('normal'), set('velocity_x', 0)]"

	on_end_turn_anim="[set('facing', if(level.player.x < x, -1, 1)), animation('normal')]"
	on_end_normal_anim="if(desired_facing != facing, animation('turn'), animation('start_jump'))
                         where desired_facing = if(level.player.x < x, -1, 1)"
	on_end_start_jump_anim="[animation('jump'),set('velocity_x',400*facing),set('velocity_y',-1200)]"
	on_end_jump_anim="animation('jump')"

	on_enter_anim="set(tmp, 'already_hit', [])"
	on_collide_object_body=" if(collide_with.vars.team != vars.team and collide_with_area = 'attack',
		if(not (me in collide_with.tmp.already_hit), [set(collide_with.tmp, 'already_hit', collide_with.tmp.already_hit + [me]),
	
			set('hitpoints', hitpoints - collide_with.vars.damage), debug(collide_with.vars.damage), animation('hurt'), set('green', 100), set('blue', 100), set('velocity_y',-1000), set('velocity_x',500 * collide_with.facing)]))"
	
	on_hurtflicker="if(green = 100,[set('green', 255), set('blue', 255)],[set('green', 100), set('blue', 100)])"
	on_leave_hurt_anim="[set('green', 255), set('blue', 255)]"
	on_end_hurt_anim="animation('normal')"


		solid_area=2,2,22,22

		[base:animation]
		image=enemies/fumper.png
		body_area=all
		accel_y=50
		[/animation]
	
		[animation]
		id=normal
		duplicates=4
		rect=0,0,25,26
		frames=1
		duration=10
		[/animation]
		
		[animation]
		id=normal #blink variant
		rect=0,29,25,55
		frames=1
		duration=5
		[/animation]
		
		[animation]
		id=start_jump
		rect=0,0,25,26
		frames=4
		duration=5
		[/animation]
		
		[animation]
		id=jump
		rect=104,0,129,26
		frames=2
		pad=1
		frames_per_row=1
		duration=2
		attack_area=22,12,26,20
		[/animation]

		
		[animation]
		id=turn
		rect=33,28,58,55
		frames=1
		duration=8
		[/animation]
		
		[animation]
		id=hurt
		rect=0,29,25,55
		frames=1
		duration=18
		events="6:12:18:hurtflicker"
		[/animation]
		
		
	[/object_type]

