
### Instructions: When one does deign to create a win_grid object, one should call the create function (not the event) before adding one's win_grid to a level.

[object_type]
	id=win_grid
	next_animation="'red'"
	always_active=yes
	zorder=1000 #1100, +~10 is for the GUI
	
	[vars]
		size=[0,0]
		objs=[]
		flags=[]
	[/vars]
	
	[consts]
		tile_size = 20
	[/consts]
	
	[properties]
		#size, [x,y] grid spaces big (0 for default fit). objs is a list of gui objects to put in grid. flags is a list which may contain 'passive', 'grey', 'timeout' (set in vars.timeout), 'ok_button', or 'cancel_button'.#
		create="def(size_in, objs, flags) [
			set(me.draw_area, [0,0,pix_size[0],pix_size[1]]),
			[	set(me.animation, colour),
				[	set(obj.animation, colour), #west wall#
					set(obj.draw_area, [0, 0, (obj.img_w*3)/2, pix_size[1]-(me.x-obj.x)/2]),
					add_object(obj),
					] where obj = object('win_grid.wall', x-img_w/2, y + (img_h*3)/2, facing),
				[	set(obj.animation, colour), #east wall#
					set(obj.rotate, 180),
					set(obj.draw_area, [0, 0, (obj.img_w*3)/2, pix_size[1]+(me.y-obj.y)]),
					add_object(obj),
					] where obj = object('win_grid.wall', x+(pix_size[0]*3)/2+img_w, y + (img_h*3)/2, facing),
				[	set(obj.animation, colour), #north wall#
					set(obj.rotate, 90),
					set(obj.draw_area, [0, 0, 22, (obj.img_w*3)/2]),
					debug(img_h, img_w),
					add_object(obj),
					] where obj = object('win_grid.wall', x+(img_h*3)/2, y-img_w/2, facing),
				] where colour = if('grey' in flags, 'grey', 'red'),
			] 
			where pix_size = [size_[0]*consts.tile_size, size_[1]*consts.tile_size]
			where size_ = if(size_in != [0,0], size_in, [5, 1+size(objs)/5])"
	[/properties]
	

	[animation]
		id=red
		image=gui/window-parts/red.png
		x=0
		y=0
		w=8
		h=8
		frames=1
		duration=1000000
	[/animation]
	
	[animation]
		id=grey
		image=gui/window-parts/grey.png
		x=0
		y=0
		w=8
		h=8
		frames=1
		duration=1000000
	[/animation]
	
	[object_type]
		id=wall
		next_animation="'red'"
		always_active=yes
		zorder=1100

		[animation]
			id=red
			image=gui/window-parts/redwall.png
			x=0
			y=0
			w=8
			h=16
			frames=1
			duration=1000000
		[/animation]
		
		[animation]
			id=grey
			image=gui/window-parts/grey.png
			x=0
			y=0
			w=8
			h=8
			frames=1
			duration=1000000
		[/animation]
	[/object_type]
	
[/object_type]