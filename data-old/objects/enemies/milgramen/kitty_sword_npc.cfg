[object_type]
friction="1000"
id="kitty_sword_npc"
on_create="animation('stand')"
on_end_brandish_anim="animation('stand')"
on_end_charge_brandish_anim="animation('brandish')"
on_end_jump_attack_anim="animation('stand')"
on_end_lunge_attack_anim="animation('stand')"
on_end_stand_anim="animation('stand')"
on_end_walk_anim="animation('walk')"
on_end_walkSad_anim="animation('walkSad')"
on_process_jump="if(is_standing, animation('stand'))"

on_end_extend_sword_anim="animation('stand')"
on_enter_extend_sword_anim="spawn('metal_specular_sparkle', midpoint_x+40*facing, midpoint_y,facing)"

on_end_swordBreak_anim="[set(vars.animation_counter, 3),animation('blinkBroken')]"
on_end_blinkBroken_anim="if(vars.animation_counter > 0, [set(vars.animation_counter, vars.animation_counter - 1),animation('blinkBroken')], schedule(10,animation('raiseBroken')))"

on_end_raiseBroken_anim="[set(vars.animation_counter, 3),animation('raiseBlinkBroken')]"

on_end_raiseBlinkBroken_anim="if(vars.animation_counter > 0, [set(vars.animation_counter, vars.animation_counter - 1),animation('raiseBlinkBroken')], schedule(10,animation('lowerBroken')))"

on_end_lowerBroken_anim="animation('lowerBrokenSniffle')"

on_end_lowerBrokenSniffle_anim="animation('lowerBrokenSniffle')"


on_shatter="[map([0] * 10, spawn('kitty_sword_npc.sword_chunk', midpoint_x + (30+1d10)*facing, midpoint_y + 1d10-5, facing)),sound('SwordBreak.ogg')]"

solid_area="13,8,23,33"
solid_dimensions="null"
	[vars]
	animation_counter="3"
	turns_at_cliffs="1"
	turns_towards_player="1"
	[/vars]

	[base:animation]
	image="enemies/kitty-sword.png"
	body_area="all"
	pad="3"
	[/animation]

	[animation]	#special one-frame of him pointing his sword at someone.
	id="extend_sword"
	rect=127,255,186,290
	duration=300
	[/animation]

	[animation]
	accel_x="360"
	accel_y="80"
	duration="6"
	frames="4"
	frames_per_row="4"
	id="walkSad"
	rect="295,80,342,115"
	solid_area="13,6,23,31"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="15"
	frames="8"
	frames_per_row="4"
	id="swordBreak"
	events="90:shatter"
	rect="1,310,63,347"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="10"
	frames="2"
	frames_per_row="2"
	id="blinkBroken"
	rect="276,310,338,347"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="10"
	frames="1"
	frames_per_row="1"
	id="raiseBroken"
	rect="276,351,338,388"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="10"
	frames="2"
	frames_per_row="2"
	id="raiseBlinkBroken"
	rect="346,351,408,388"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="10"
	frames="1"
	frames_per_row="1"
	id="lowerBroken"
	rect="276,392,338,429"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="10"
	frames="2"
	frames_per_row="2"
	id="lowerBrokenSniffle"
	rect="342,392,404,429"
	solid_area="13,9,23,34"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="stand"
	rect="1,1,41,36"
	reverse="yes"
	[/animation]

	[animation]
	accel_x="360"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="walk"
	rect="1,1,41,36"
	reverse="yes"
	[/animation]

	[animation]
	accel_x="360"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="walk"
	rect="133,1,173,36"
	reverse="yes"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="8"
	frames="3"
	frames_per_row="3"
	id="jump"
	rect="1,198,41,251"
	reverse="yes"
	solid_area="13,29,23,54"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="charge_brandish"
	rect="1,79,41,114"
	reverse="no"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="brandish"
	rect="1,118,55,153"
	reverse="no"
	[/animation]

	[animation]
	accel_x="0"
	accel_y="80"
	duration="6"
	frames="3"
	frames_per_row="3"
	id="sword_extend"
	rect="1,1,41,36"
	reverse="yes"
	[/animation]

		[object_type]
		id=sword_chunk
		dies_on_inactive=yes
		has_feet=no
	
		on_create="[animation('normal' + 1d8), set(velocity_x, 1d600-300), set(velocity_y, 1d500 - 250), set(rotate, 0), set_var('rotation', 1d20)]"
		
		zorder=-1
	
			[base:animation]
			image="enemies/kitty-sword.png"
			accel_y=20
			frames=1
			duration=100
			body_area=all
			[/animation]
	
			[animation]
			id=normal1
			rect=242,198,251,207
			[/animation]
	
			[animation]
			id=normal2
			rect=255,198,264,207
			[/animation]
	
			[animation]
			id=normal3
			rect=268,198,277,207
			[/animation]
	
			[animation]
			id=normal4
			rect=281,198,290,207
			[/animation]

	
			[animation]
			id=normal5
			rect=242,211,251,220
			[/animation]
	
			[animation]
			id=normal6
			rect=255,211,264,220
			[/animation]
	
			[animation]
			id=normal7
			rect=268,211,277,220
			[/animation]
	
			[animation]
			id=normal8
			rect=281,211,290,220
			[/animation]
		[/object_type]


[/object_type]

